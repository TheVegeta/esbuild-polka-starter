var ws=Object.create;var hr=Object.defineProperty;var Is=Object.getOwnPropertyDescriptor;var Rs=Object.getOwnPropertyNames;var As=Object.getPrototypeOf,vs=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ks=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Rs(t))!vs.call(e,n)&&n!==i&&hr(e,n,{get:()=>t[n],enumerable:!(r=Is(t,n))||r.enumerable});return e};var $=(e,t,i)=>(i=e!=null?ws(As(e)):{},ks(t||!e||!e.__esModule?hr(i,"default",{value:e,enumerable:!0}):i,e));var pr=y(mr=>{mr.json=function(e={}){let t=e.limit||102400,i=e.type||"application/json";return function(r,n,o){if(r._body)return o();r.body=r.body||{};let s=r.headers,a=s["content-type"],c=parseInt(s["content-length"],10);if(isNaN(c)&&s["transfer-encoding"]==null||a&&!a.includes(i)||c===0)return o();let h=[],f=0;r.on("data",l=>{f+=Buffer.byteLength(l),f<=t?h.push(l):(o({code:413,details:"Exceeded JSON limit"}),r.destroy())}).on("end",()=>{try{r.body=JSON.parse(h),r._body=!0,o()}catch(l){l.code=422,l.details=l.message,l.message="Invalid JSON",o(l)}}).on("error",o)}}});var Er=y((Mf,dr)=>{"use strict";dr.exports=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var i=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(s){return function(a,c){var h={key:a,value:s[a]},f={key:c,value:s[c]};return o(h,f)}}}(t.cmp),n=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,c;if(Array.isArray(s)){for(c="[",a=0;a<s.length;a++)a&&(c+=","),c+=o(s[a])||"null";return c+"]"}if(s===null)return"null";if(n.indexOf(s)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=n.push(s)-1,f=Object.keys(s).sort(r&&r(s));for(c="",a=0;a<f.length;a++){var l=f[a],E=o(s[l]);!E||(c&&(c+=","),c+=JSON.stringify(l)+":"+E)}return n.splice(h,1),"{"+c+"}"}}(e)}});var yt=y(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.USE_PROXY=u.UNSUPPORTED_MEDIA_TYPE=u.UNPROCESSABLE_ENTITY=u.UNAUTHORIZED=u.TOO_MANY_REQUESTS=u.TEMPORARY_REDIRECT=u.SWITCHING_PROTOCOLS=u.SERVICE_UNAVAILABLE=u.SEE_OTHER=u.RESET_CONTENT=u.REQUESTED_RANGE_NOT_SATISFIABLE=u.REQUEST_URI_TOO_LONG=u.REQUEST_TOO_LONG=u.REQUEST_TIMEOUT=u.REQUEST_HEADER_FIELDS_TOO_LARGE=u.PROXY_AUTHENTICATION_REQUIRED=u.PROCESSING=u.PRECONDITION_REQUIRED=u.PRECONDITION_FAILED=u.PERMANENT_REDIRECT=u.PAYMENT_REQUIRED=u.PARTIAL_CONTENT=u.OK=u.NOT_MODIFIED=u.NOT_IMPLEMENTED=u.NOT_FOUND=u.NOT_ACCEPTABLE=u.NON_AUTHORITATIVE_INFORMATION=u.NO_CONTENT=u.NETWORK_AUTHENTICATION_REQUIRED=u.MULTIPLE_CHOICES=u.MULTI_STATUS=u.MOVED_TEMPORARILY=u.MOVED_PERMANENTLY=u.METHOD_NOT_ALLOWED=u.METHOD_FAILURE=u.LOCKED=u.LENGTH_REQUIRED=u.INTERNAL_SERVER_ERROR=u.INSUFFICIENT_STORAGE=u.INSUFFICIENT_SPACE_ON_RESOURCE=u.IM_A_TEAPOT=u.HTTP_VERSION_NOT_SUPPORTED=u.GONE=u.GATEWAY_TIMEOUT=u.FORBIDDEN=u.FAILED_DEPENDENCY=u.EXPECTATION_FAILED=u.CREATED=u.CONTINUE=u.CONFLICT=u.BAD_REQUEST=u.BAD_GATEWAY=u.ACCEPTED=void 0;u.ACCEPTED=202;u.BAD_GATEWAY=502;u.BAD_REQUEST=400;u.CONFLICT=409;u.CONTINUE=100;u.CREATED=201;u.EXPECTATION_FAILED=417;u.FAILED_DEPENDENCY=424;u.FORBIDDEN=403;u.GATEWAY_TIMEOUT=504;u.GONE=410;u.HTTP_VERSION_NOT_SUPPORTED=505;u.IM_A_TEAPOT=418;u.INSUFFICIENT_SPACE_ON_RESOURCE=419;u.INSUFFICIENT_STORAGE=507;u.INTERNAL_SERVER_ERROR=500;u.LENGTH_REQUIRED=411;u.LOCKED=423;u.METHOD_FAILURE=420;u.METHOD_NOT_ALLOWED=405;u.MOVED_PERMANENTLY=301;u.MOVED_TEMPORARILY=302;u.MULTI_STATUS=207;u.MULTIPLE_CHOICES=300;u.NETWORK_AUTHENTICATION_REQUIRED=511;u.NO_CONTENT=204;u.NON_AUTHORITATIVE_INFORMATION=203;u.NOT_ACCEPTABLE=406;u.NOT_FOUND=404;u.NOT_IMPLEMENTED=501;u.NOT_MODIFIED=304;u.OK=200;u.PARTIAL_CONTENT=206;u.PAYMENT_REQUIRED=402;u.PERMANENT_REDIRECT=308;u.PRECONDITION_FAILED=412;u.PRECONDITION_REQUIRED=428;u.PROCESSING=102;u.PROXY_AUTHENTICATION_REQUIRED=407;u.REQUEST_HEADER_FIELDS_TOO_LARGE=431;u.REQUEST_TIMEOUT=408;u.REQUEST_TOO_LONG=413;u.REQUEST_URI_TOO_LONG=414;u.REQUESTED_RANGE_NOT_SATISFIABLE=416;u.RESET_CONTENT=205;u.SEE_OTHER=303;u.SERVICE_UNAVAILABLE=503;u.SWITCHING_PROTOCOLS=101;u.TEMPORARY_REDIRECT=307;u.TOO_MANY_REQUESTS=429;u.UNAUTHORIZED=401;u.UNPROCESSABLE_ENTITY=422;u.UNSUPPORTED_MEDIA_TYPE=415;u.USE_PROXY=305;u.default={ACCEPTED:u.ACCEPTED,BAD_GATEWAY:u.BAD_GATEWAY,BAD_REQUEST:u.BAD_REQUEST,CONFLICT:u.CONFLICT,CONTINUE:u.CONTINUE,CREATED:u.CREATED,EXPECTATION_FAILED:u.EXPECTATION_FAILED,FORBIDDEN:u.FORBIDDEN,GATEWAY_TIMEOUT:u.GATEWAY_TIMEOUT,GONE:u.GONE,HTTP_VERSION_NOT_SUPPORTED:u.HTTP_VERSION_NOT_SUPPORTED,IM_A_TEAPOT:u.IM_A_TEAPOT,INSUFFICIENT_SPACE_ON_RESOURCE:u.INSUFFICIENT_SPACE_ON_RESOURCE,INSUFFICIENT_STORAGE:u.INSUFFICIENT_STORAGE,INTERNAL_SERVER_ERROR:u.INTERNAL_SERVER_ERROR,LENGTH_REQUIRED:u.LENGTH_REQUIRED,LOCKED:u.LOCKED,METHOD_FAILURE:u.METHOD_FAILURE,METHOD_NOT_ALLOWED:u.METHOD_NOT_ALLOWED,MOVED_PERMANENTLY:u.MOVED_PERMANENTLY,MOVED_TEMPORARILY:u.MOVED_TEMPORARILY,MULTI_STATUS:u.MULTI_STATUS,MULTIPLE_CHOICES:u.MULTIPLE_CHOICES,NETWORK_AUTHENTICATION_REQUIRED:u.NETWORK_AUTHENTICATION_REQUIRED,NO_CONTENT:u.NO_CONTENT,NON_AUTHORITATIVE_INFORMATION:u.NON_AUTHORITATIVE_INFORMATION,NOT_ACCEPTABLE:u.NOT_ACCEPTABLE,NOT_FOUND:u.NOT_FOUND,NOT_IMPLEMENTED:u.NOT_IMPLEMENTED,NOT_MODIFIED:u.NOT_MODIFIED,OK:u.OK,PARTIAL_CONTENT:u.PARTIAL_CONTENT,PAYMENT_REQUIRED:u.PAYMENT_REQUIRED,PERMANENT_REDIRECT:u.PERMANENT_REDIRECT,PRECONDITION_FAILED:u.PRECONDITION_FAILED,PRECONDITION_REQUIRED:u.PRECONDITION_REQUIRED,PROCESSING:u.PROCESSING,PROXY_AUTHENTICATION_REQUIRED:u.PROXY_AUTHENTICATION_REQUIRED,REQUEST_HEADER_FIELDS_TOO_LARGE:u.REQUEST_HEADER_FIELDS_TOO_LARGE,REQUEST_TIMEOUT:u.REQUEST_TIMEOUT,REQUEST_TOO_LONG:u.REQUEST_TOO_LONG,REQUEST_URI_TOO_LONG:u.REQUEST_URI_TOO_LONG,REQUESTED_RANGE_NOT_SATISFIABLE:u.REQUESTED_RANGE_NOT_SATISFIABLE,RESET_CONTENT:u.RESET_CONTENT,SEE_OTHER:u.SEE_OTHER,SERVICE_UNAVAILABLE:u.SERVICE_UNAVAILABLE,SWITCHING_PROTOCOLS:u.SWITCHING_PROTOCOLS,TEMPORARY_REDIRECT:u.TEMPORARY_REDIRECT,TOO_MANY_REQUESTS:u.TOO_MANY_REQUESTS,UNAUTHORIZED:u.UNAUTHORIZED,UNPROCESSABLE_ENTITY:u.UNPROCESSABLE_ENTITY,UNSUPPORTED_MEDIA_TYPE:u.UNSUPPORTED_MEDIA_TYPE,USE_PROXY:u.USE_PROXY}});var xr=y(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.reasonPhraseToStatusCode=Se.statusCodeToReasonPhrase=void 0;Se.statusCodeToReasonPhrase={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Internal Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",451:"Unavailable For Legal Reasons",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy",421:"Misdirected Request"};Se.reasonPhraseToStatusCode={Accepted:202,"Bad Gateway":502,"Bad Request":400,Conflict:409,Continue:100,Created:201,"Expectation Failed":417,"Failed Dependency":424,Forbidden:403,"Gateway Timeout":504,Gone:410,"HTTP Version Not Supported":505,"I'm a teapot":418,"Insufficient Space on Resource":419,"Insufficient Storage":507,"Internal Server Error":500,"Length Required":411,Locked:423,"Method Failure":420,"Method Not Allowed":405,"Moved Permanently":301,"Moved Temporarily":302,"Multi-Status":207,"Multiple Choices":300,"Network Authentication Required":511,"No Content":204,"Non Authoritative Information":203,"Not Acceptable":406,"Not Found":404,"Not Implemented":501,"Not Modified":304,OK:200,"Partial Content":206,"Payment Required":402,"Permanent Redirect":308,"Precondition Failed":412,"Precondition Required":428,Processing:102,"Proxy Authentication Required":407,"Request Header Fields Too Large":431,"Request Timeout":408,"Request Entity Too Large":413,"Request-URI Too Long":414,"Requested Range Not Satisfiable":416,"Reset Content":205,"See Other":303,"Service Unavailable":503,"Switching Protocols":101,"Temporary Redirect":307,"Too Many Requests":429,Unauthorized:401,"Unavailable For Legal Reasons":451,"Unprocessable Entity":422,"Unsupported Media Type":415,"Use Proxy":305,"Misdirected Request":421}});var Tt=y(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.getStatusText=ae.getStatusCode=ae.getReasonPhrase=void 0;var yr=xr();function Tr(e){var t=yr.statusCodeToReasonPhrase[e.toString()];if(!t)throw new Error("Status code does not exist: "+e);return t}ae.getReasonPhrase=Tr;function bs(e){var t=yr.reasonPhraseToStatusCode[e];if(!t)throw new Error("Reason phrase does not exist: "+e);return t}ae.getStatusCode=bs;ae.getStatusText=Tr});var _r=y(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.StatusCodes=void 0;var Ds;(function(e){e[e.ACCEPTED=202]="ACCEPTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.CONFLICT=409]="CONFLICT",e[e.CONTINUE=100]="CONTINUE",e[e.CREATED=201]="CREATED",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.GONE=410]="GONE",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.IM_A_TEAPOT=418]="IM_A_TEAPOT",e[e.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.LOCKED=423]="LOCKED",e[e.METHOD_FAILURE=420]="METHOD_FAILURE",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.OK=200]="OK",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.PROCESSING=102]="PROCESSING",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",e[e.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.USE_PROXY=305]="USE_PROXY",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST"})(Ds=Pe.StatusCodes||(Pe.StatusCodes={}))});var gr=y(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ReasonPhrases=void 0;var Ps;(function(e){e.ACCEPTED="Accepted",e.BAD_GATEWAY="Bad Gateway",e.BAD_REQUEST="Bad Request",e.CONFLICT="Conflict",e.CONTINUE="Continue",e.CREATED="Created",e.EXPECTATION_FAILED="Expectation Failed",e.FAILED_DEPENDENCY="Failed Dependency",e.FORBIDDEN="Forbidden",e.GATEWAY_TIMEOUT="Gateway Timeout",e.GONE="Gone",e.HTTP_VERSION_NOT_SUPPORTED="HTTP Version Not Supported",e.IM_A_TEAPOT="I'm a teapot",e.INSUFFICIENT_SPACE_ON_RESOURCE="Insufficient Space on Resource",e.INSUFFICIENT_STORAGE="Insufficient Storage",e.INTERNAL_SERVER_ERROR="Internal Server Error",e.LENGTH_REQUIRED="Length Required",e.LOCKED="Locked",e.METHOD_FAILURE="Method Failure",e.METHOD_NOT_ALLOWED="Method Not Allowed",e.MOVED_PERMANENTLY="Moved Permanently",e.MOVED_TEMPORARILY="Moved Temporarily",e.MULTI_STATUS="Multi-Status",e.MULTIPLE_CHOICES="Multiple Choices",e.NETWORK_AUTHENTICATION_REQUIRED="Network Authentication Required",e.NO_CONTENT="No Content",e.NON_AUTHORITATIVE_INFORMATION="Non Authoritative Information",e.NOT_ACCEPTABLE="Not Acceptable",e.NOT_FOUND="Not Found",e.NOT_IMPLEMENTED="Not Implemented",e.NOT_MODIFIED="Not Modified",e.OK="OK",e.PARTIAL_CONTENT="Partial Content",e.PAYMENT_REQUIRED="Payment Required",e.PERMANENT_REDIRECT="Permanent Redirect",e.PRECONDITION_FAILED="Precondition Failed",e.PRECONDITION_REQUIRED="Precondition Required",e.PROCESSING="Processing",e.PROXY_AUTHENTICATION_REQUIRED="Proxy Authentication Required",e.REQUEST_HEADER_FIELDS_TOO_LARGE="Request Header Fields Too Large",e.REQUEST_TIMEOUT="Request Timeout",e.REQUEST_TOO_LONG="Request Entity Too Large",e.REQUEST_URI_TOO_LONG="Request-URI Too Long",e.REQUESTED_RANGE_NOT_SATISFIABLE="Requested Range Not Satisfiable",e.RESET_CONTENT="Reset Content",e.SEE_OTHER="See Other",e.SERVICE_UNAVAILABLE="Service Unavailable",e.SWITCHING_PROTOCOLS="Switching Protocols",e.TEMPORARY_REDIRECT="Temporary Redirect",e.TOO_MANY_REQUESTS="Too Many Requests",e.UNAUTHORIZED="Unauthorized",e.UNAVAILABLE_FOR_LEGAL_REASONS="Unavailable For Legal Reasons",e.UNPROCESSABLE_ENTITY="Unprocessable Entity",e.UNSUPPORTED_MEDIA_TYPE="Unsupported Media Type",e.USE_PROXY="Use Proxy",e.MISDIRECTED_REQUEST="Misdirected Request"})(Ps=Fe.ReasonPhrases||(Fe.ReasonPhrases={}))});var gt=y(H=>{"use strict";var We=H&&H.__assign||function(){return We=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},We.apply(this,arguments)},Fs=H&&H.__createBinding||(Object.create?function(e,t,i,r){r===void 0&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]}),Cs=H&&H.__exportStar||function(e,t){for(var i in e)i!=="default"&&!t.hasOwnProperty(i)&&Fs(t,e,i)},Ls=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H,"__esModule",{value:!0});var Us=Ls(yt()),Or=Tt(),_t=Tt();Object.defineProperty(H,"getStatusCode",{enumerable:!0,get:function(){return _t.getStatusCode}});Object.defineProperty(H,"getReasonPhrase",{enumerable:!0,get:function(){return _t.getReasonPhrase}});Object.defineProperty(H,"getStatusText",{enumerable:!0,get:function(){return _t.getStatusText}});var Ms=_r();Object.defineProperty(H,"StatusCodes",{enumerable:!0,get:function(){return Ms.StatusCodes}});var Bs=gr();Object.defineProperty(H,"ReasonPhrases",{enumerable:!0,get:function(){return Bs.ReasonPhrases}});Cs(yt(),H);H.default=We(We({},Us.default),{getStatusCode:Or.getStatusCode,getStatusText:Or.getStatusText})});var Ir=y((zf,wr)=>{wr.exports=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var i,r,n,o,s=[],a="",c=e.split("/");for(c[0]||c.shift();n=c.shift();)i=n[0],i==="*"?(s.push("wild"),a+="/(.*)"):i===":"?(r=n.indexOf("?",1),o=n.indexOf(".",1),s.push(n.substring(1,~r?r:~o?o:n.length)),a+=!!~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+n.substring(o))):a+="/"+n;return{keys:s,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}});var vr=y((Kf,Ar)=>{var Rr=Ir();Ar.exports=class{constructor(){this.routes=[],this.all=this.add.bind(this,""),this.get=this.add.bind(this,"GET"),this.head=this.add.bind(this,"HEAD"),this.patch=this.add.bind(this,"PATCH"),this.options=this.add.bind(this,"OPTIONS"),this.connect=this.add.bind(this,"CONNECT"),this.delete=this.add.bind(this,"DELETE"),this.trace=this.add.bind(this,"TRACE"),this.post=this.add.bind(this,"POST"),this.put=this.add.bind(this,"PUT")}use(t,...i){let r=[].concat.apply([],i),{keys:n,pattern:o}=Rr(t,!0);return this.routes.push({keys:n,pattern:o,method:"",handlers:r}),this}add(t,i,...r){let{keys:n,pattern:o}=Rr(i),s=[].concat.apply([],r);return this.routes.push({keys:n,pattern:o,method:t,handlers:s}),this}find(t,i){let r=t==="HEAD",n=0,o=0,s,a,c=this.routes,h=[],f={},l=[];for(;n<c.length;n++)if(a=c[n],a.method.length===0||a.method===t||r&&a.method==="GET")if(a.keys===!1){if(h=a.pattern.exec(i),h===null)continue;if(h.groups!==void 0)for(s in h.groups)f[s]=h.groups[s];a.handlers.length>1?l=l.concat(a.handlers):l.push(a.handlers[0])}else if(a.keys.length>0){if(h=a.pattern.exec(i),h===null)continue;for(o=0;o<a.keys.length;)f[a.keys[o]]=h[++o];a.handlers.length>1?l=l.concat(a.handlers):l.push(a.handlers[0])}else a.pattern.test(i)&&(a.handlers.length>1?l=l.concat(a.handlers):l.push(a.handlers[0]));return{params:f,handlers:l}}}});var Ke=y((qr,Hr)=>{"use strict";function Gs(e){if(e.length===0)return;let t=Object.create(null),i=0;for(;i<e.length;++i){let s=e.charCodeAt(i);if(xe[s]!==1){if(s!==47||i===0)return;break}}if(i===e.length)return;let r=e.slice(0,i).toLowerCase(),n=++i;for(;i<e.length;++i){let s=e.charCodeAt(i);if(xe[s]!==1){if(i===n||$s(e,i,t)===void 0)return;break}}if(i===n)return;let o=e.slice(n,i).toLowerCase();return{type:r,subtype:o,params:t}}function $s(e,t,i){for(;t<e.length;){for(;t<e.length;++t){let a=e.charCodeAt(t);if(a!==32&&a!==9)break}if(t===e.length)break;if(e.charCodeAt(t++)!==59)return;for(;t<e.length;++t){let a=e.charCodeAt(t);if(a!==32&&a!==9)break}if(t===e.length)return;let r,n=t;for(;t<e.length;++t){let a=e.charCodeAt(t);if(xe[a]!==1){if(a!==61)return;break}}if(t===e.length||(r=e.slice(n,t),++t,t===e.length))return;let o="",s;if(e.charCodeAt(t)===34){s=++t;let a=!1;for(;t<e.length;++t){let c=e.charCodeAt(t);if(c===92){a?(s=t,a=!1):(o+=e.slice(s,t),a=!0);continue}if(c===34){if(a){s=t,a=!1;continue}o+=e.slice(s,t);break}if(a&&(s=t-1,a=!1),Br[c]!==1)return}if(t===e.length)return;++t}else{for(s=t;t<e.length;++t){let a=e.charCodeAt(t);if(xe[a]!==1){if(t===s)return;break}}o=e.slice(s,t)}r=r.toLowerCase(),i[r]===void 0&&(i[r]=o)}return i}function Ys(e,t){if(e.length===0)return;let i=Object.create(null),r=0;for(;r<e.length;++r){let o=e.charCodeAt(r);if(xe[o]!==1){if(Vs(e,r,i,t)===void 0)return;break}}return{type:e.slice(0,r).toLowerCase(),params:i}}function Vs(e,t,i,r){for(;t<e.length;){for(;t<e.length;++t){let h=e.charCodeAt(t);if(h!==32&&h!==9)break}if(t===e.length)break;if(e.charCodeAt(t++)!==59)return;for(;t<e.length;++t){let h=e.charCodeAt(t);if(h!==32&&h!==9)break}if(t===e.length)return;let n,o=t;for(;t<e.length;++t){let h=e.charCodeAt(t);if(xe[h]!==1){if(h===61)break;return}}if(t===e.length)return;let s="",a,c;if(n=e.slice(o,t),n.charCodeAt(n.length-1)===42){let h=++t;for(;t<e.length;++t){let l=e.charCodeAt(t);if(zs[l]!==1){if(l!==39)return;break}}if(t===e.length)return;for(c=e.slice(h,t),++t;t<e.length&&e.charCodeAt(t)!==39;++t);if(t===e.length||(++t,t===e.length))return;a=t;let f=0;for(;t<e.length;++t){let l=e.charCodeAt(t);if(Qs[l]!==1){if(l===37){let E,p;if(t+2<e.length&&(E=Lr[e.charCodeAt(t+1)])!==-1&&(p=Lr[e.charCodeAt(t+2)])!==-1){let m=(E<<4)+p;s+=e.slice(a,t),s+=String.fromCharCode(m),t+=2,a=t+1,m>=128?f=2:f===0&&(f=1);continue}return}break}}if(s+=e.slice(a,t),s=Mr(s,c,f),s===void 0)return}else{if(++t,t===e.length)return;if(e.charCodeAt(t)===34){a=++t;let h=!1;for(;t<e.length;++t){let f=e.charCodeAt(t);if(f===92){h?(a=t,h=!1):(s+=e.slice(a,t),h=!0);continue}if(f===34){if(h){a=t,h=!1;continue}s+=e.slice(a,t);break}if(h&&(a=t-1,h=!1),Br[f]!==1)return}if(t===e.length)return;++t}else{for(a=t;t<e.length;++t){let h=e.charCodeAt(t);if(xe[h]!==1){if(t===a)return;break}}s=e.slice(a,t)}if(s=r(s,2),s===void 0)return}n=n.toLowerCase(),i[n]===void 0&&(i[n]=s)}return i}function Ur(e){let t;for(;;)switch(e){case"utf-8":case"utf8":return Ce.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return Ce.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return Ce.utf16le;case"base64":return Ce.base64;default:if(t===void 0){t=!0,e=e.toLowerCase();continue}return Ce.other.bind(e)}}var Ce={utf8:(e,t)=>{if(e.length===0)return"";if(typeof e=="string"){if(t<2)return e;e=Buffer.from(e,"latin1")}return e.utf8Slice(0,e.length)},latin1:(e,t)=>e.length===0?"":typeof e=="string"?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,"latin1")),e.ucs2Slice(0,e.length)),base64:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,"latin1")),e.base64Slice(0,e.length)),other:(e,t)=>{if(e.length===0)return"";typeof e=="string"&&(e=Buffer.from(e,"latin1"));try{return new TextDecoder(qr).decode(e)}catch{}}};function Mr(e,t,i){let r=Ur(t);if(r)return r(e,i)}function Ws(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;--t)switch(e.charCodeAt(t)){case 47:case 92:return e=e.slice(t+1),e===".."||e==="."?"":e}return e===".."||e==="."?"":e}var xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Br=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],zs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Lr=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Hr.exports={basename:Ws,convertToUTF8:Mr,getDecoder:Ur,parseContentType:Gs,parseDisposition:Ys}});var Yr=y((i0,$r)=>{"use strict";function jr(e,t,i,r,n){for(let o=0;o<n;++o)if(e[t+o]!==i[r+o])return!1;return!0}var Rt=class{constructor(t,i){if(typeof i!="function")throw new Error("Missing match callback");if(typeof t=="string")t=Buffer.from(t);else if(!Buffer.isBuffer(t))throw new Error(`Expected Buffer for needle, got ${typeof t}`);let r=t.length;if(this.maxMatches=1/0,this.matches=0,this._cb=i,this._lookbehindSize=0,this._needle=t,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(r),this._occ=[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],r>1)for(let n=0;n<r-1;++n)this._occ[t[n]]=r-1-n}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(t,i){let r;Buffer.isBuffer(t)||(t=Buffer.from(t,"latin1"));let n=t.length;for(this._bufPos=i||0;r!==n&&this.matches<this.maxMatches;)r=Ks(this,t);return r}destroy(){let t=this._lookbehindSize;t&&this._cb(!1,this._lookbehind,0,t,!1),this.reset()}};function Ks(e,t){let i=t.length,r=e._needle,n=r.length,o=-e._lookbehindSize,s=n-1,a=r[s],c=i-n,h=e._occ,f=e._lookbehind;if(o<0){for(;o<0&&o<=c;){let E=o+s,p=E<0?f[e._lookbehindSize+E]:t[E];if(p===a&&Gr(e,t,o,s))return e._lookbehindSize=0,++e.matches,o>-e._lookbehindSize?e._cb(!0,f,0,e._lookbehindSize+o,!1):e._cb(!0,void 0,0,0,!0),e._bufPos=o+n;o+=h[p]}for(;o<0&&!Gr(e,t,o,i-o);)++o;if(o<0){let E=e._lookbehindSize+o;return E>0&&e._cb(!1,f,0,E,!1),e._lookbehindSize-=E,f.copy(f,0,E,e._lookbehindSize),f.set(t,e._lookbehindSize),e._lookbehindSize+=i,e._bufPos=i,i}e._cb(!1,f,0,e._lookbehindSize,!1),e._lookbehindSize=0}o+=e._bufPos;let l=r[0];for(;o<=c;){let E=t[o+s];if(E===a&&t[o]===l&&jr(r,0,t,o,s))return++e.matches,o>0?e._cb(!0,t,e._bufPos,o,!0):e._cb(!0,void 0,0,0,!0),e._bufPos=o+n;o+=h[E]}for(;o<i;){if(t[o]!==l||!jr(t,o,r,0,i-o)){++o;continue}t.copy(f,0,o,i),e._lookbehindSize=i-o;break}return o>0&&e._cb(!1,t,e._bufPos,o<i?o:i,!0),e._bufPos=i,i}function Gr(e,t,i,r){let n=e._lookbehind,o=e._lookbehindSize,s=e._needle;for(let a=0;a<r;++a,++i)if((i<0?n[o+i]:t[i])!==s[a])return!1;return!0}$r.exports=Rt});var ei=y((n0,Zr)=>{"use strict";var{Readable:Js,Writable:Xs}=require("stream"),Zs=Yr(),{basename:ea,convertToUTF8:Vr,getDecoder:ta,parseContentType:ra,parseDisposition:ia}=Ke(),na=Buffer.from(`\r
`),oa=Buffer.from("\r"),sa=Buffer.from("-");function Wr(){}var aa=2e3,Ie=16*1024,Je=0,zr=1,Qr=2,At=class{constructor(t){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=Je,this.name="",this.value="",this.crlf=0,this.cb=t}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=Je,this.name="",this.value="",this.crlf=0}push(t,i,r){let n=i;for(;i<r;)switch(this.state){case Je:{let o=!1;for(;i<r;++i){if(this.byteCount===Ie)return-1;++this.byteCount;let s=t[i];if(fa[s]!==1){if(s!==58||(this.name+=t.latin1Slice(n,i),this.name.length===0))return-1;++i,o=!0,this.state=zr;break}}if(!o){this.name+=t.latin1Slice(n,i);break}}case zr:{let o=!1;for(;i<r;++i){if(this.byteCount===Ie)return-1;++this.byteCount;let s=t[i];if(s!==32&&s!==9){n=i,o=!0,this.state=Qr;break}}if(!o)break}case Qr:switch(this.crlf){case 0:for(;i<r;++i){if(this.byteCount===Ie)return-1;++this.byteCount;let o=t[i];if(la[o]!==1){if(o!==13)return-1;++this.crlf;break}}this.value+=t.latin1Slice(n,i++);break;case 1:if(this.byteCount===Ie||(++this.byteCount,t[i++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===Ie)return-1;++this.byteCount;let o=t[i];o===32||o===9?(n=i,this.crlf=0):(++this.pairCount<aa&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),o===13?(++this.crlf,++i):(n=i,this.crlf=0,this.state=Je,this.name="",this.value=""));break}case 3:{if(this.byteCount===Ie||(++this.byteCount,t[i++]!==10))return-1;let o=this.header;return this.reset(),this.cb(o),i}}break}return i}},vt=class extends Js{constructor(t,i){super(t),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--i._fileEndsLeft===0&&i._finalcb){let r=i._finalcb;i._finalcb=null,process.nextTick(r)}})}_read(t){let i=this._readcb;i&&(this._readcb=null,i())}},Kr={push:(e,t)=>{},destroy:()=>{}};function ca(e,t){let i=e._writecb;e._writecb=null,t?e.destroy(t):i&&i()}function ua(e,t){return e}var kt=class extends Xs{constructor(t){let i={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.highWaterMark=="number"?t.highWaterMark:void 0};if(super(i),!t.conType.params||typeof t.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let r=t.conType.params.boundary,n=typeof t.defParamCharset=="string"&&t.defParamCharset?ta(t.defParamCharset):ua,o=t.defCharset||"utf8",s=t.preservePath,a={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.fileHwm=="number"?t.fileHwm:void 0},c=t.limits,h=c&&typeof c.fieldSize=="number"?c.fieldSize:1*1024*1024,f=c&&typeof c.fileSize=="number"?c.fileSize:1/0,l=c&&typeof c.files=="number"?c.files:1/0,E=c&&typeof c.fields=="number"?c.fields:1/0,p=c&&typeof c.parts=="number"?c.parts:1/0,m=-1,d=0,x=0,T=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let O=0,N,B=0,X,L,F,J,g=!1,I=!1,w=!1;this._hparser=null;let U=new At(R=>{this._hparser=null,T=!1,F="text/plain",X=o,L="7bit",J=void 0,g=!1;let S;if(!R["content-disposition"]){T=!0;return}let _=ia(R["content-disposition"][0],n);if(!_||_.type!=="form-data"){T=!0;return}if(_.params&&(_.params.name&&(J=_.params.name),_.params["filename*"]?S=_.params["filename*"]:_.params.filename&&(S=_.params.filename),S!==void 0&&!s&&(S=ea(S))),R["content-type"]){let A=ra(R["content-type"][0]);A&&(F=`${A.type}/${A.subtype}`,A.params&&typeof A.params.charset=="string"&&(X=A.params.charset.toLowerCase()))}if(R["content-transfer-encoding"]&&(L=R["content-transfer-encoding"][0].toLowerCase()),F==="application/octet-stream"||S!==void 0){if(x===l){I||(I=!0,this.emit("filesLimit")),T=!0;return}if(++x,this.listenerCount("file")===0){T=!0;return}O=0,this._fileStream=new vt(a,this),++this._fileEndsLeft,this.emit("file",J,this._fileStream,{filename:S,encoding:L,mimeType:F})}else{if(d===E){w||(w=!0,this.emit("fieldsLimit")),T=!0;return}if(++d,this.listenerCount("field")===0){T=!0;return}N=[],B=0}}),v=0,C=(R,S,_,A,k)=>{e:for(;S;){if(this._hparser!==null){let D=this._hparser.push(S,_,A);if(D===-1){this._hparser=null,U.reset(),this.emit("error",new Error("Malformed part header"));break}_=D}if(_===A)break;if(v!==0){if(v===1){switch(S[_]){case 45:v=2,++_;break;case 13:v=3,++_;break;default:v=0}if(_===A)return}if(v===2){if(v=0,S[_]===45){this._complete=!0,this._bparser=Kr;return}let D=this._writecb;this._writecb=Wr,C(!1,sa,0,1,!1),this._writecb=D}else if(v===3)if(v=0,S[_]===10){if(++_,m>=p||(this._hparser=U,_===A))break;continue e}else{let D=this._writecb;this._writecb=Wr,C(!1,oa,0,1,!1),this._writecb=D}}if(!T){if(this._fileStream){let D,se=Math.min(A-_,f-O);k?D=S.slice(_,_+se):(D=Buffer.allocUnsafe(se),S.copy(D,0,_,_+se)),O+=D.length,O===f?(D.length>0&&this._fileStream.push(D),this._fileStream.emit("limit"),this._fileStream.truncated=!0,T=!0):this._fileStream.push(D)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(N!==void 0){let D,se=Math.min(A-_,h-B);k?D=S.slice(_,_+se):(D=Buffer.allocUnsafe(se),S.copy(D,0,_,_+se)),B+=se,N.push(D),B===h&&(T=!0,g=!0)}}break}if(R){if(v=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(N!==void 0){let D;switch(N.length){case 0:D="";break;case 1:D=Vr(N[0],X,0);break;default:D=Vr(Buffer.concat(N,B),X,0)}N=void 0,B=0,this.emit("field",J,D,{nameTruncated:!1,valueTruncated:g,encoding:L,mimeType:F})}++m===p&&this.emit("partsLimit")}};this._bparser=new Zs(`\r
--${r}`,C),this._writecb=null,this._finalcb=null,this.write(na)}static detect(t){return t.type==="multipart"&&t.subtype==="form-data"}_write(t,i,r){this._writecb=r,this._bparser.push(t,0),this._writecb&&ca(this)}_destroy(t,i){this._hparser=null,this._bparser=Kr,t||(t=Xr(this));let r=this._fileStream;r&&(this._fileStream=null,r.destroy(t)),i(t)}_final(t){if(this._bparser.destroy(),!this._complete)return t(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=Jr.bind(null,this,t):Jr(this,t)}};function Jr(e,t,i){if(i)return t(i);i=Xr(e),t(i)}function Xr(e){if(e._hparser)return new Error("Malformed part header");let t=e._fileStream;if(t&&(e._fileStream=null,t.destroy(new Error("Unexpected end of file"))),!e._complete)return new Error("Unexpected end of form")}var fa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],la=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Zr.exports=kt});var ri=y((o0,ti)=>{"use strict";var{Writable:ha}=require("stream"),{getDecoder:ma}=Ke(),Ct=class extends ha{constructor(t){let i={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.highWaterMark=="number"?t.highWaterMark:void 0};super(i);let r=t.defCharset||"utf8";t.conType.params&&typeof t.conType.params.charset=="string"&&(r=t.conType.params.charset),this.charset=r;let n=t.limits;this.fieldSizeLimit=n&&typeof n.fieldSize=="number"?n.fieldSize:1*1024*1024,this.fieldsLimit=n&&typeof n.fields=="number"?n.fields:1/0,this.fieldNameSizeLimit=n&&typeof n.fieldNameSize=="number"?n.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=ma(r)}static detect(t){return t.type==="application"&&t.subtype==="x-www-form-urlencoded"}_write(t,i,r){if(this._fields>=this.fieldsLimit)return r();let n=0,o=t.length;if(this._lastPos=0,this._byte!==-2){if(n=bt(this,t,n,o),n===-1)return r(new Error("Malformed urlencoded form"));if(n>=o)return r();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;n<o;)if(this._inKey){for(n=Dt(this,t,n,o);n<o;){switch(t[n]){case 61:this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),r();continue;case 43:this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._key+=" ",this._lastPos=n+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,n=bt(this,t,n+1,o),n===-1)return r(new Error("Malformed urlencoded form"));if(n>=o)return r();++this._bytesKey,n=Dt(this,t,n,o);continue}++n,++this._bytesKey,n=Dt(this,t,n,o)}this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n))}else{for(n=Pt(this,t,n,o);n<o;){switch(t[n]){case 38:if(this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),r();continue e;case 43:this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._val+=" ",this._lastPos=n+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,n=bt(this,t,n+1,o),n===-1)return r(new Error("Malformed urlencoded form"));if(n>=o)return r();++this._bytesVal,n=Pt(this,t,n,o);continue}++n,++this._bytesVal,n=Pt(this,t,n,o)}this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n))}r()}_final(t){if(this._byte!==-2)return t(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),t()}};function bt(e,t,i,r){if(i>=r)return r;if(e._byte===-1){let n=Ft[t[i++]];if(n===-1)return-1;if(n>=8&&(e._encode=2),i<r){let o=Ft[t[i++]];if(o===-1)return-1;e._inKey?e._key+=String.fromCharCode((n<<4)+o):e._val+=String.fromCharCode((n<<4)+o),e._byte=-2,e._lastPos=i}else e._byte=n}else{let n=Ft[t[i++]];if(n===-1)return-1;e._inKey?e._key+=String.fromCharCode((e._byte<<4)+n):e._val+=String.fromCharCode((e._byte<<4)+n),e._byte=-2,e._lastPos=i}return i}function Dt(e,t,i,r){if(e._bytesKey>e.fieldNameSizeLimit){for(e._keyTrunc||e._lastPos<i&&(e._key+=t.latin1Slice(e._lastPos,i-1)),e._keyTrunc=!0;i<r;++i){let n=t[i];if(n===61||n===38)break;++e._bytesKey}e._lastPos=i}return i}function Pt(e,t,i,r){if(e._bytesVal>e.fieldSizeLimit){for(e._valTrunc||e._lastPos<i&&(e._val+=t.latin1Slice(e._lastPos,i-1)),e._valTrunc=!0;i<r&&t[i]!==38;++i)++e._bytesVal;e._lastPos=i}return i}var Ft=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];ti.exports=Ct});var Lt=y((s0,ii)=>{"use strict";var{parseContentType:pa}=Ke();function da(e){let t=e.headers,i=pa(t["content-type"]);if(!i)throw new Error("Malformed content type");for(let r of Ea){if(!r.detect(i))continue;let o={limits:e.limits,headers:t,conType:i,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return e.highWaterMark&&(o.highWaterMark=e.highWaterMark),e.fileHwm&&(o.fileHwm=e.fileHwm),o.defCharset=e.defCharset,o.defParamCharset=e.defParamCharset,o.preservePath=e.preservePath,new r(o)}throw new Error(`Unsupported content type: ${t["content-type"]}`)}var Ea=[ei(),ri()].filter(function(e){return typeof e.detect=="function"});ii.exports=e=>{if((typeof e!="object"||e===null)&&(e={}),typeof e.headers!="object"||e.headers===null||typeof e.headers["content-type"]!="string")throw new Error("Missing Content-Type");return da(e)}});var oi=y((a0,ni)=>{var Ut=class{constructor(t=0,i=()=>{}){this.timeout=t,this.callback=i,this.timer=null}clear(){clearTimeout(this.timer)}set(){return this.timeout?(this.clear(),this.timer=setTimeout(this.callback,this.timeout),!0):!1}};ni.exports=Ut});var ye=y((c0,mi)=>{"use strict";var ce=require("fs"),xa=require("path"),{Readable:ya}=require("stream"),Ta=/[^\w-]/g,_a=3,ga=65536,Oa="tmp",Xe=0,Sa=(e,t)=>(e||{}).debug?(console.log(`Express-file-upload: ${t}`),!0):!1,si=(e=Oa)=>(Xe=Xe>=ga?1:Xe+1,`${e}-${Xe}-${Date.now()}`),ai=e=>!!(e&&e.constructor&&e.call&&e.apply),ci=(e,t)=>ai(t)?t:e,Na=(e,t)=>{let i=!1;return r=>{if(!i)return i=!0,r?ci(e,t)(r):e()}},wa=function(){let e={};return[...arguments].forEach(t=>{!t||typeof t!="object"||Object.keys(t).forEach(i=>e[i]=t[i])}),e},Ia=Object.getOwnPropertyNames(Object.prototype),Ra=Object.getOwnPropertyNames(Array.prototype),ui=(e,t)=>{let i=e instanceof Array&&Ra.includes(t),r=Ia.includes(t);return!i&&!r},Aa=(e,t,i)=>i==null||(e=e||Object.create(null),!ui(e,t))?e:e[t]?(e[t]instanceof Array?e[t].push(i):e[t]=[e[t],i],e):(e[t]=i,e),va=(e,t)=>{if(!e||!e.createParentPath||!t)return!1;let i=xa.dirname(t);return ce.existsSync(i)||ce.mkdirSync(i,{recursive:!0}),ce.existsSync(i)},fi=(e,t)=>ce.unlink(e,t),li=(e,t,i)=>{let r=!1,n=a=>{r||(r=!0,i(a))},o=ce.createReadStream(e);o.on("error",n);let s=ce.createWriteStream(t);s.on("error",a=>{o.destroy(),n(a)}),s.on("close",()=>n()),o.pipe(s)},ka=(e,t,i)=>ce.rename(e,t,r=>r?li(e,t,n=>n?i(n):fi(e,i)):i()),ba=(e,t,i)=>{if(!Buffer.isBuffer(e))return i(new Error("buffer variable should be type of Buffer!"));let r=e,n=ya();n._read=()=>{n.push(r),r=null};let o=ce.createWriteStream(t);o.on("error",s=>{i(s)}),o.on("close",()=>{i()}),n.pipe(o)},hi=(e,t)=>e.uriDecodeFileNames?decodeURIComponent(t):t,Da=(e,t)=>{let i=parseInt(e),r={name:t,extension:""};if(!e&&i!==0)return r;let n=isNaN(i)?_a:Math.abs(i),o=t.split(".");if(o.length<2)return r;let s=o.pop();return s.length>n&&n>0&&(o[o.length-1]+="."+s.substr(0,s.length-n),s=s.substr(-n)),r.extension=n?s:"",r.name=o.join("."),r},Pa=(e,t)=>{if(!t||typeof t!="string")return si();let i=t.length<=255?t:t.substr(0,255);if(i=hi(e,i),!e.safeFileNames)return i;let r=typeof e.safeFileNames=="object"&&e.safeFileNames instanceof RegExp?e.safeFileNames:Ta,{name:n,extension:o}=Da(e.preserveExtension,i);return o.length&&(o="."+o.replace(r,"")),n.replace(r,"").concat(o)};mi.exports={isFunc:ai,debugLog:Sa,copyFile:li,moveFile:ka,errorFunc:ci,deleteFile:fi,buildFields:Aa,buildOptions:wa,parseFileName:Pa,getTempFilename:si,promiseCallback:Na,checkAndMakeDir:va,saveBufferToFile:ba,uriDecodeFileName:hi,isSafeFromPollution:ui}});var xi=y((u0,Ei)=>{"use strict";var{isFunc:Fa,debugLog:pi,moveFile:Ca,promiseCallback:di,checkAndMakeDir:La,saveBufferToFile:Ua}=ye(),Ma=(e,t,i)=>(r,n)=>{pi(i,`Moving temporary file ${t.tempFilePath} to ${e}`),Ca(t.tempFilePath,e,di(r,n))},Ba=(e,t,i)=>(r,n)=>{pi(i,`Moving uploaded buffer to ${e}`),Ua(t.buffer,e,di(r,n))};Ei.exports=(e,t={})=>({name:e.name,data:e.buffer,size:e.size,encoding:e.encoding,tempFilePath:e.tempFilePath,truncated:e.truncated,mimetype:e.mimetype,md5:e.hash,mv:(i,r)=>{let n=t.useTempFiles?Ma(i,e,t):Ba(i,e,t);return La(t,i),Fa(r)?n(r):new Promise(n)}})});var Ti=y((f0,yi)=>{var qa=require("crypto"),{debugLog:Mt}=ye();yi.exports=(e,t,i)=>{let r=[],n=qa.createHash("md5"),o=0,s=!1,a=()=>Buffer.concat(r,o);return{dataHandler:c=>{if(s===!0){Mt(e,`Error: got ${t}->${i} data chunk for completed upload!`);return}r.push(c),n.update(c),o+=c.length,Mt(e,`Uploading ${t}->${i}, bytes:${o}...`)},getBuffer:a,getFilePath:()=>"",getFileSize:()=>o,getHash:()=>n.digest("hex"),complete:()=>(Mt(e,`Upload ${t}->${i} completed, bytes:${o}.`),s=!0,a()),cleanup:()=>{s=!0},getWritePromise:()=>Promise.resolve()}}});var Oi=y((l0,gi)=>{var Ha=require("fs"),_i=require("path"),ja=require("crypto"),{debugLog:re,checkAndMakeDir:Ga,getTempFilename:$a,deleteFile:Ya}=ye();gi.exports=(e,t,i)=>{let r=_i.normalize(e.tempFileDir),n=_i.join(r,$a());Ga({createParentPath:!0},n),re(e,`Temporary file path is ${n}`);let o=ja.createHash("md5"),s=0,a=!1;re(e,`Opening write stream for ${t}->${i}...`);let c=Ha.createWriteStream(n),h=new Promise((f,l)=>{c.on("finish",()=>f()),c.on("error",E=>{re(e,`Error write temp file: ${E}`),l(E)})});return{dataHandler:f=>{if(a===!0){re(e,`Error: got ${t}->${i} data chunk for completed upload!`);return}c.write(f),o.update(f),s+=f.length,re(e,`Uploading ${t}->${i}, bytes:${s}...`)},getFilePath:()=>n,getFileSize:()=>s,getHash:()=>o.digest("hex"),complete:()=>(a=!0,re(e,`Upload ${t}->${i} completed, bytes:${s}.`),c!==!1&&c.end(),Buffer.concat([])),cleanup:()=>{a=!0,re(e,`Cleaning up temporary file ${n}...`),c.end(),Ya(n,f=>f?re(e,`Cleaning up temporary file ${n} failed: ${f}`):re(e,`Cleaning up temporary file ${n} done.`))},getWritePromise:()=>h}}});var Ni=y((h0,Si)=>{var{isSafeFromPollution:Va}=ye();Si.exports=function(e){if(!e||e.length<1)return Object.create(null);let t=Object.create(null),i=Object.keys(e);for(let r=0;r<i.length;r++){let n=i[r],o=e[n],s=t,a=n.replace(new RegExp(/\[/g),".").replace(new RegExp(/\]/g),"").split(".");for(let c=0;c<a.length;c++){let h=a[c];!Va(s,h)||(c>=a.length-1?s[h]=o:(s[h]||(s[h]=isNaN(a[c+1])?Object.create(null):[]),s=s[h]))}}return t}});var vi=y((m0,Ai)=>{var Wa=Lt(),za=oi(),Qa=xi(),Ka=Ti(),Ja=Oi(),wi=Ni(),{isFunc:Ii,debugLog:ie,buildFields:Ri,buildOptions:Xa,parseFileName:Za}=ye(),Re=Symbol("wait flush property symbol");Ai.exports=(e,t,i,r)=>{t.files=null;let n=Xa(e,{headers:t.headers}),o=Wa(n),s=(a,c)=>{t.unpipe(o),i.writeHead(a||400,{Connection:"close"}),i.end(c||"Bad Request")};t.body instanceof Buffer&&(t.body=Object.create(null)),o.on("field",(a,c)=>t.body=Ri(t.body,a,c)),o.on("file",(a,c,h)=>{let{filename:f,encoding:l,mimeType:E}=h,p=Za(e,f),{dataHandler:m,getFilePath:d,getFileSize:x,getHash:T,complete:O,cleanup:N,getWritePromise:B}=e.useTempFiles?Ja(e,a,p):Ka(e,a,p),X=e.useTempFiles?B().catch(F=>{t.unpipe(o),t.resume(),N(),r(F)}):B(),L=new za(e.uploadTimeout,()=>{c.removeAllListeners("data"),c.resume(),c.destroy(new Error(`Upload timeout ${a}->${p}, bytes:${x()}`))});c.on("limit",()=>{if(ie(e,`Size limit reached for ${a}->${p}, bytes:${x()}`),L.clear(),Ii(e.limitHandler))return e.limitHandler(t,i,r);e.abortOnLimit&&(ie(e,`Aborting upload because of size limit ${a}->${p}.`),Ii(e.limitHandler)||s(413,e.responseOnLimit),N())}),c.on("data",F=>{L.set(),m(F)}),c.on("end",()=>{let F=x();if(ie(e,`Upload finished ${a}->${p}, bytes:${F}`),L.clear(),!f&&F===0)return e.useTempFiles&&(N(),ie(e,`Removing the empty file ${a}->${p}`)),ie(e,"Don't add file instance if original name and size are empty");t.files=Ri(t.files,a,Qa({buffer:O(),name:p,tempFilePath:d(),hash:T(),size:F,encoding:l,truncated:c.truncated,mimetype:E},e)),t[Re]||(t[Re]=[]),t[Re].push(X)}),c.on("error",F=>{L.clear(),ie(e,F),N(),r()}),ie(e,`New upload started ${a}->${p}, bytes:${x()}`),L.set()}),o.on("finish",()=>{if(ie(e,"Busboy finished parsing request."),e.parseNested&&(t.body=wi(t.body),t.files=wi(t.files)),!t[Re])return r();Promise.all(t[Re]).then(()=>{delete t[Re],r()})}),o.on("error",a=>{ie(e,"Busboy error"),r(a)}),t.pipe(o)}});var bi=y((p0,ki)=>{var ec=/^(multipart\/.+);(.*)$/i,tc=["GET","HEAD"],rc=e=>"transfer-encoding"in e.headers||"content-length"in e.headers&&e.headers["content-length"]!=="0",ic=e=>!tc.includes(e.method),nc=e=>ec.test(e.headers["content-type"]);ki.exports=e=>rc(e)&&ic(e)&&nc(e)});var Pi=y((E0,Di)=>{"use strict";var oc=require("path"),sc=vi(),ac=bi(),{buildOptions:cc,debugLog:uc}=ye(),d0=Lt(),fc={debug:!1,uploadTimeout:6e4,fileHandler:!1,uriDecodeFileNames:!1,safeFileNames:!1,preserveExtension:!1,abortOnLimit:!1,responseOnLimit:"File size limit has been reached",limitHandler:!1,createParentPath:!1,parseNested:!1,useTempFiles:!1,tempFileDir:oc.join(process.cwd(),"tmp")};Di.exports=e=>{let t=cc(fc,e);return(i,r,n)=>{if(!ac(i))return uc(t,"Request is not eligible for file upload!"),n();sc(t,i,r,n)}}});var Mi=y($t=>{$t.read=function(e,t,i,r,n){var o,s,a=n*8-r-1,c=(1<<a)-1,h=c>>1,f=-7,l=i?n-1:0,E=i?-1:1,p=e[t+l];for(l+=E,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=o*256+e[t+l],l+=E,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=s*256+e[t+l],l+=E,f-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-h}return(p?-1:1)*s*Math.pow(2,o-r)};$t.write=function(e,t,i,r,n,o){var s,a,c,h=o*8-n-1,f=(1<<h)-1,l=f>>1,E=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,m=r?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+l>=1?t+=E/c:t+=E*Math.pow(2,1-l),t*c>=2&&(s++,c/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*c-1)*Math.pow(2,n),s=s+l):(a=t*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;e[i+p]=a&255,p+=m,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;e[i+p]=s&255,p+=m,s/=256,h-=8);e[i+p-m]|=d*128}});var z=y(Wt=>{"use strict";Wt.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((i,r)=>{e.call(this,...t,(n,o)=>n!=null?r(n):i(o))})},"name",{value:e.name})};Wt.fromPromise=function(e){return Object.defineProperty(function(...t){let i=t[t.length-1];if(typeof i!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(r=>i(null,r),i)},"name",{value:e.name})}});var Zi=y((sl,Xi)=>{var fe=require("constants"),yc=process.cwd,tt=null,Tc=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tt||(tt=yc.call(process)),tt};try{process.cwd()}catch{}typeof process.chdir=="function"&&(zt=process.chdir,process.chdir=function(e){tt=null,zt.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,zt));var zt;Xi.exports=_c;function _c(e){fe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||i(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,l,E){E&&process.nextTick(E)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,l,E,p){p&&process.nextTick(p)},e.lchownSync=function(){}),Tc==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function l(E,p,m){var d=Date.now(),x=0;f(E,p,function T(O){if(O&&(O.code==="EACCES"||O.code==="EPERM")&&Date.now()-d<6e4){setTimeout(function(){e.stat(p,function(N,B){N&&N.code==="ENOENT"?f(E,p,T):m(O)})},x),x<100&&(x+=10);return}m&&m(O)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,f),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function l(E,p,m,d,x,T){var O;if(T&&typeof T=="function"){var N=0;O=function(B,X,L){if(B&&B.code==="EAGAIN"&&N<10)return N++,f.call(e,E,p,m,d,x,O);T.apply(this,arguments)}}return f.call(e,E,p,m,d,x,O)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,f),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(l,E,p,m,d){for(var x=0;;)try{return f.call(e,l,E,p,m,d)}catch(T){if(T.code==="EAGAIN"&&x<10){x++;continue}throw T}}}(e.readSync);function t(f){f.lchmod=function(l,E,p){f.open(l,fe.O_WRONLY|fe.O_SYMLINK,E,function(m,d){if(m){p&&p(m);return}f.fchmod(d,E,function(x){f.close(d,function(T){p&&p(x||T)})})})},f.lchmodSync=function(l,E){var p=f.openSync(l,fe.O_WRONLY|fe.O_SYMLINK,E),m=!0,d;try{d=f.fchmodSync(p,E),m=!1}finally{if(m)try{f.closeSync(p)}catch{}else f.closeSync(p)}return d}}function i(f){fe.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(l,E,p,m){f.open(l,fe.O_SYMLINK,function(d,x){if(d){m&&m(d);return}f.futimes(x,E,p,function(T){f.close(x,function(O){m&&m(T||O)})})})},f.lutimesSync=function(l,E,p){var m=f.openSync(l,fe.O_SYMLINK),d,x=!0;try{d=f.futimesSync(m,E,p),x=!1}finally{if(x)try{f.closeSync(m)}catch{}else f.closeSync(m)}return d}):f.futimes&&(f.lutimes=function(l,E,p,m){m&&process.nextTick(m)},f.lutimesSync=function(){})}function r(f){return f&&function(l,E,p){return f.call(e,l,E,function(m){h(m)&&(m=null),p&&p.apply(this,arguments)})}}function n(f){return f&&function(l,E){try{return f.call(e,l,E)}catch(p){if(!h(p))throw p}}}function o(f){return f&&function(l,E,p,m){return f.call(e,l,E,p,function(d){h(d)&&(d=null),m&&m.apply(this,arguments)})}}function s(f){return f&&function(l,E,p){try{return f.call(e,l,E,p)}catch(m){if(!h(m))throw m}}}function a(f){return f&&function(l,E,p){typeof E=="function"&&(p=E,E=null);function m(d,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),p&&p.apply(this,arguments)}return E?f.call(e,l,E,m):f.call(e,l,m)}}function c(f){return f&&function(l,E){var p=E?f.call(e,l,E):f.call(e,l);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function h(f){if(!f||f.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var rn=y((al,tn)=>{var en=require("stream").Stream;tn.exports=gc;function gc(e){return{ReadStream:t,WriteStream:i};function t(r,n){if(!(this instanceof t))return new t(r,n);en.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var s=Object.keys(n),a=0,c=s.length;a<c;a++){var h=s[a];this[h]=n[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,l){if(f){o.emit("error",f),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function i(r,n){if(!(this instanceof i))return new i(r,n);en.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var o=Object.keys(n),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=n[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var on=y((cl,nn)=>{"use strict";nn.exports=Sc;var Oc=Object.getPrototypeOf||function(e){return e.__proto__};function Sc(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Oc(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}),t}});var Y=y((ul,Jt)=>{var P=require("fs"),Nc=Zi(),wc=rn(),Ic=on(),rt=require("util"),j,nt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(j=Symbol.for("graceful-fs.queue"),nt=Symbol.for("graceful-fs.previous")):(j="___graceful-fs.queue",nt="___graceful-fs.previous");function Rc(){}function cn(e,t){Object.defineProperty(e,j,{get:function(){return t}})}var _e=Rc;rt.debuglog?_e=rt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(_e=function(){var e=rt.format.apply(rt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});P[j]||(sn=global[j]||[],cn(P,sn),P.close=function(e){function t(i,r){return e.call(P,i,function(n){n||an(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,nt,{value:e}),t}(P.close),P.closeSync=function(e){function t(i){e.apply(P,arguments),an()}return Object.defineProperty(t,nt,{value:e}),t}(P.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){_e(P[j]),require("assert").equal(P[j].length,0)}));var sn;global[j]||cn(global,P[j]);Jt.exports=Qt(Ic(P));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!P.__patched&&(Jt.exports=Qt(P),P.__patched=!0);function Qt(e){Nc(e),e.gracefulify=Qt,e.createReadStream=X,e.createWriteStream=L;var t=e.readFile;e.readFile=i;function i(g,I,w){return typeof I=="function"&&(w=I,I=null),U(g,I,w);function U(v,C,R,S){return t(v,C,function(_){_&&(_.code==="EMFILE"||_.code==="ENFILE")?ve([U,[v,C,R],_,S||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=n;function n(g,I,w,U){return typeof w=="function"&&(U=w,w=null),v(g,I,w,U);function v(C,R,S,_,A){return r(C,R,S,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ve([v,[C,R,S,_],k,A||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(g,I,w,U){return typeof w=="function"&&(U=w,w=null),v(g,I,w,U);function v(C,R,S,_,A){return o(C,R,S,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ve([v,[C,R,S,_],k,A||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=c);function c(g,I,w,U){return typeof w=="function"&&(U=w,w=0),v(g,I,w,U);function v(C,R,S,_,A){return a(C,R,S,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ve([v,[C,R,S,_],k,A||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var h=e.readdir;e.readdir=l;var f=/^v[0-5]\./;function l(g,I,w){typeof I=="function"&&(w=I,I=null);var U=f.test(process.version)?function(R,S,_,A){return h(R,v(R,S,_,A))}:function(R,S,_,A){return h(R,S,v(R,S,_,A))};return U(g,I,w);function v(C,R,S,_){return function(A,k){A&&(A.code==="EMFILE"||A.code==="ENFILE")?ve([U,[C,R,S],A,_||Date.now(),Date.now()]):(k&&k.sort&&k.sort(),typeof S=="function"&&S.call(this,A,k))}}}if(process.version.substr(0,4)==="v0.8"){var E=wc(e);T=E.ReadStream,N=E.WriteStream}var p=e.ReadStream;p&&(T.prototype=Object.create(p.prototype),T.prototype.open=O);var m=e.WriteStream;m&&(N.prototype=Object.create(m.prototype),N.prototype.open=B),Object.defineProperty(e,"ReadStream",{get:function(){return T},set:function(g){T=g},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return N},set:function(g){N=g},enumerable:!0,configurable:!0});var d=T;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(g){d=g},enumerable:!0,configurable:!0});var x=N;Object.defineProperty(e,"FileWriteStream",{get:function(){return x},set:function(g){x=g},enumerable:!0,configurable:!0});function T(g,I){return this instanceof T?(p.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function O(){var g=this;J(g.path,g.flags,g.mode,function(I,w){I?(g.autoClose&&g.destroy(),g.emit("error",I)):(g.fd=w,g.emit("open",w),g.read())})}function N(g,I){return this instanceof N?(m.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function B(){var g=this;J(g.path,g.flags,g.mode,function(I,w){I?(g.destroy(),g.emit("error",I)):(g.fd=w,g.emit("open",w))})}function X(g,I){return new e.ReadStream(g,I)}function L(g,I){return new e.WriteStream(g,I)}var F=e.open;e.open=J;function J(g,I,w,U){return typeof w=="function"&&(U=w,w=null),v(g,I,w,U);function v(C,R,S,_,A){return F(C,R,S,function(k,D){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ve([v,[C,R,S,_],k,A||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}return e}function ve(e){_e("ENQUEUE",e[0].name,e[1]),P[j].push(e),Kt()}var it;function an(){for(var e=Date.now(),t=0;t<P[j].length;++t)P[j][t].length>2&&(P[j][t][3]=e,P[j][t][4]=e);Kt()}function Kt(){if(clearTimeout(it),it=void 0,P[j].length!==0){var e=P[j].shift(),t=e[0],i=e[1],r=e[2],n=e[3],o=e[4];if(n===void 0)_e("RETRY",t.name,i),t.apply(null,i);else if(Date.now()-n>=6e4){_e("TIMEOUT",t.name,i);var s=i.pop();typeof s=="function"&&s.call(null,r)}else{var a=Date.now()-o,c=Math.max(o-n,1),h=Math.min(c*1.2,100);a>=h?(_e("RETRY",t.name,i),t.apply(null,i.concat([n]))):P[j].push(e)}it===void 0&&(it=setTimeout(Kt,0))}}});var ge=y(le=>{"use strict";var un=z().fromCallback,Q=Y(),Ac=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Q[e]=="function");Object.assign(le,Q);Ac.forEach(e=>{le[e]=un(Q[e])});le.exists=function(e,t){return typeof t=="function"?Q.exists(e,t):new Promise(i=>Q.exists(e,i))};le.read=function(e,t,i,r,n,o){return typeof o=="function"?Q.read(e,t,i,r,n,o):new Promise((s,a)=>{Q.read(e,t,i,r,n,(c,h,f)=>{if(c)return a(c);s({bytesRead:h,buffer:f})})})};le.write=function(e,t,...i){return typeof i[i.length-1]=="function"?Q.write(e,t,...i):new Promise((r,n)=>{Q.write(e,t,...i,(o,s,a)=>{if(o)return n(o);r({bytesWritten:s,buffer:a})})})};typeof Q.writev=="function"&&(le.writev=function(e,t,...i){return typeof i[i.length-1]=="function"?Q.writev(e,t,...i):new Promise((r,n)=>{Q.writev(e,t,...i,(o,s,a)=>{if(o)return n(o);r({bytesWritten:s,buffers:a})})})});typeof Q.realpath.native=="function"?le.realpath.native=un(Q.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ln=y((ll,fn)=>{"use strict";var vc=require("path");fn.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(vc.parse(t).root,""))){let r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}}});var dn=y((hl,Xt)=>{"use strict";var hn=ge(),{checkPath:mn}=ln(),pn=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Xt.exports.makeDir=async(e,t)=>(mn(e),hn.mkdir(e,{mode:pn(t),recursive:!0}));Xt.exports.makeDirSync=(e,t)=>(mn(e),hn.mkdirSync(e,{mode:pn(t),recursive:!0}))});var Z=y((ml,En)=>{"use strict";var kc=z().fromPromise,{makeDir:bc,makeDirSync:Zt}=dn(),er=kc(bc);En.exports={mkdirs:er,mkdirsSync:Zt,mkdirp:er,mkdirpSync:Zt,ensureDir:er,ensureDirSync:Zt}});var he=y((pl,yn)=>{"use strict";var Dc=z().fromPromise,xn=ge();function Pc(e){return xn.access(e).then(()=>!0).catch(()=>!1)}yn.exports={pathExists:Dc(Pc),pathExistsSync:xn.existsSync}});var tr=y((dl,Tn)=>{"use strict";var ke=Y();function Fc(e,t,i,r){ke.open(e,"r+",(n,o)=>{if(n)return r(n);ke.futimes(o,t,i,s=>{ke.close(o,a=>{r&&r(s||a)})})})}function Cc(e,t,i){let r=ke.openSync(e,"r+");return ke.futimesSync(r,t,i),ke.closeSync(r)}Tn.exports={utimesMillis:Fc,utimesMillisSync:Cc}});var Oe=y((El,On)=>{"use strict";var be=ge(),q=require("path"),Lc=require("util");function Uc(e,t,i){let r=i.dereference?n=>be.stat(n,{bigint:!0}):n=>be.lstat(n,{bigint:!0});return Promise.all([r(e),r(t).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,o])=>({srcStat:n,destStat:o}))}function Mc(e,t,i){let r,n=i.dereference?s=>be.statSync(s,{bigint:!0}):s=>be.lstatSync(s,{bigint:!0}),o=n(e);try{r=n(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:r}}function Bc(e,t,i,r,n){Lc.callbackify(Uc)(e,t,r,(o,s)=>{if(o)return n(o);let{srcStat:a,destStat:c}=s;if(c){if(Le(a,c)){let h=q.basename(e),f=q.basename(t);return i==="move"&&h!==f&&h.toLowerCase()===f.toLowerCase()?n(null,{srcStat:a,destStat:c,isChangingCase:!0}):n(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!c.isDirectory())return n(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&c.isDirectory())return n(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&rr(e,t)?n(new Error(ot(e,t,i))):n(null,{srcStat:a,destStat:c})})}function qc(e,t,i,r){let{srcStat:n,destStat:o}=Mc(e,t,r);if(o){if(Le(n,o)){let s=q.basename(e),a=q.basename(t);if(i==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:n,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!n.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(n.isDirectory()&&rr(e,t))throw new Error(ot(e,t,i));return{srcStat:n,destStat:o}}function _n(e,t,i,r,n){let o=q.resolve(q.dirname(e)),s=q.resolve(q.dirname(i));if(s===o||s===q.parse(s).root)return n();be.stat(s,{bigint:!0},(a,c)=>a?a.code==="ENOENT"?n():n(a):Le(t,c)?n(new Error(ot(e,i,r))):_n(e,t,s,r,n))}function gn(e,t,i,r){let n=q.resolve(q.dirname(e)),o=q.resolve(q.dirname(i));if(o===n||o===q.parse(o).root)return;let s;try{s=be.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Le(t,s))throw new Error(ot(e,i,r));return gn(e,t,o,r)}function Le(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function rr(e,t){let i=q.resolve(e).split(q.sep).filter(n=>n),r=q.resolve(t).split(q.sep).filter(n=>n);return i.reduce((n,o,s)=>n&&r[s]===o,!0)}function ot(e,t,i){return`Cannot ${i} '${e}' to a subdirectory of itself, '${t}'.`}On.exports={checkPaths:Bc,checkPathsSync:qc,checkParentPaths:_n,checkParentPathsSync:gn,isSrcSubdir:rr,areIdentical:Le}});var kn=y((xl,vn)=>{"use strict";var K=Y(),Ue=require("path"),Hc=Z().mkdirs,jc=he().pathExists,Gc=tr().utimesMillis,Me=Oe();function $c(e,t,i,r){typeof i=="function"&&!r?(r=i,i={}):typeof i=="function"&&(i={filter:i}),r=r||function(){},i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Me.checkPaths(e,t,"copy",i,(n,o)=>{if(n)return r(n);let{srcStat:s,destStat:a}=o;Me.checkParentPaths(e,s,t,"copy",c=>c?r(c):i.filter?wn(Sn,a,e,t,i,r):Sn(a,e,t,i,r))})}function Sn(e,t,i,r,n){let o=Ue.dirname(i);jc(o,(s,a)=>{if(s)return n(s);if(a)return st(e,t,i,r,n);Hc(o,c=>c?n(c):st(e,t,i,r,n))})}function wn(e,t,i,r,n,o){Promise.resolve(n.filter(i,r)).then(s=>s?e(t,i,r,n,o):o(),s=>o(s))}function Yc(e,t,i,r,n){return r.filter?wn(st,e,t,i,r,n):st(e,t,i,r,n)}function st(e,t,i,r,n){(r.dereference?K.stat:K.lstat)(t,(s,a)=>s?n(s):a.isDirectory()?Xc(a,e,t,i,r,n):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?Vc(a,e,t,i,r,n):a.isSymbolicLink()?tu(e,t,i,r,n):a.isSocket()?n(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?n(new Error(`Cannot copy a FIFO pipe: ${t}`)):n(new Error(`Unknown file: ${t}`)))}function Vc(e,t,i,r,n,o){return t?Wc(e,i,r,n,o):In(e,i,r,n,o)}function Wc(e,t,i,r,n){if(r.overwrite)K.unlink(i,o=>o?n(o):In(e,t,i,r,n));else return r.errorOnExist?n(new Error(`'${i}' already exists`)):n()}function In(e,t,i,r,n){K.copyFile(t,i,o=>o?n(o):r.preserveTimestamps?zc(e.mode,t,i,n):at(i,e.mode,n))}function zc(e,t,i,r){return Qc(e)?Kc(i,e,n=>n?r(n):Nn(e,t,i,r)):Nn(e,t,i,r)}function Qc(e){return(e&128)===0}function Kc(e,t,i){return at(e,t|128,i)}function Nn(e,t,i,r){Jc(t,i,n=>n?r(n):at(i,e,r))}function at(e,t,i){return K.chmod(e,t,i)}function Jc(e,t,i){K.stat(e,(r,n)=>r?i(r):Gc(t,n.atime,n.mtime,i))}function Xc(e,t,i,r,n,o){return t?Rn(i,r,n,o):Zc(e.mode,i,r,n,o)}function Zc(e,t,i,r,n){K.mkdir(i,o=>{if(o)return n(o);Rn(t,i,r,s=>s?n(s):at(i,e,n))})}function Rn(e,t,i,r){K.readdir(e,(n,o)=>n?r(n):An(o,e,t,i,r))}function An(e,t,i,r,n){let o=e.pop();return o?eu(e,o,t,i,r,n):n()}function eu(e,t,i,r,n,o){let s=Ue.join(i,t),a=Ue.join(r,t);Me.checkPaths(s,a,"copy",n,(c,h)=>{if(c)return o(c);let{destStat:f}=h;Yc(f,s,a,n,l=>l?o(l):An(e,i,r,n,o))})}function tu(e,t,i,r,n){K.readlink(t,(o,s)=>{if(o)return n(o);if(r.dereference&&(s=Ue.resolve(process.cwd(),s)),e)K.readlink(i,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?K.symlink(s,i,n):n(a):(r.dereference&&(c=Ue.resolve(process.cwd(),c)),Me.isSrcSubdir(s,c)?n(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&Me.isSrcSubdir(c,s)?n(new Error(`Cannot overwrite '${c}' with '${s}'.`)):ru(s,i,n)));else return K.symlink(s,i,n)})}function ru(e,t,i){K.unlink(t,r=>r?i(r):K.symlink(e,t,i))}vn.exports=$c});var Cn=y((yl,Fn)=>{"use strict";var G=Y(),Be=require("path"),iu=Z().mkdirsSync,nu=tr().utimesMillisSync,qe=Oe();function ou(e,t,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:r,destStat:n}=qe.checkPathsSync(e,t,"copy",i);return qe.checkParentPathsSync(e,r,t,"copy"),su(n,e,t,i)}function su(e,t,i,r){if(r.filter&&!r.filter(t,i))return;let n=Be.dirname(i);return G.existsSync(n)||iu(n),bn(e,t,i,r)}function au(e,t,i,r){if(!(r.filter&&!r.filter(t,i)))return bn(e,t,i,r)}function bn(e,t,i,r){let o=(r.dereference?G.statSync:G.lstatSync)(t);if(o.isDirectory())return pu(o,e,t,i,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return cu(o,e,t,i,r);if(o.isSymbolicLink())return xu(e,t,i,r);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function cu(e,t,i,r,n){return t?uu(e,i,r,n):Dn(e,i,r,n)}function uu(e,t,i,r){if(r.overwrite)return G.unlinkSync(i),Dn(e,t,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}function Dn(e,t,i,r){return G.copyFileSync(t,i),r.preserveTimestamps&&fu(e.mode,t,i),ir(i,e.mode)}function fu(e,t,i){return lu(e)&&hu(i,e),mu(t,i)}function lu(e){return(e&128)===0}function hu(e,t){return ir(e,t|128)}function ir(e,t){return G.chmodSync(e,t)}function mu(e,t){let i=G.statSync(e);return nu(t,i.atime,i.mtime)}function pu(e,t,i,r,n){return t?Pn(i,r,n):du(e.mode,i,r,n)}function du(e,t,i,r){return G.mkdirSync(i),Pn(t,i,r),ir(i,e)}function Pn(e,t,i){G.readdirSync(e).forEach(r=>Eu(r,e,t,i))}function Eu(e,t,i,r){let n=Be.join(t,e),o=Be.join(i,e),{destStat:s}=qe.checkPathsSync(n,o,"copy",r);return au(s,n,o,r)}function xu(e,t,i,r){let n=G.readlinkSync(t);if(r.dereference&&(n=Be.resolve(process.cwd(),n)),e){let o;try{o=G.readlinkSync(i)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return G.symlinkSync(n,i);throw s}if(r.dereference&&(o=Be.resolve(process.cwd(),o)),qe.isSrcSubdir(n,o))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${o}'.`);if(G.statSync(i).isDirectory()&&qe.isSrcSubdir(o,n))throw new Error(`Cannot overwrite '${o}' with '${n}'.`);return yu(n,i)}else return G.symlinkSync(n,i)}function yu(e,t){return G.unlinkSync(t),G.symlinkSync(e,t)}Fn.exports=ou});var ct=y((Tl,Ln)=>{"use strict";var Tu=z().fromCallback;Ln.exports={copy:Tu(kn()),copySync:Cn()}});var Yn=y((_l,$n)=>{"use strict";var Un=Y(),Hn=require("path"),b=require("assert"),He=process.platform==="win32";function jn(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(i=>{e[i]=e[i]||Un[i],i=i+"Sync",e[i]=e[i]||Un[i]}),e.maxBusyTries=e.maxBusyTries||3}function nr(e,t,i){let r=0;typeof t=="function"&&(i=t,t={}),b(e,"rimraf: missing path"),b.strictEqual(typeof e,"string","rimraf: path should be a string"),b.strictEqual(typeof i,"function","rimraf: callback function required"),b(t,"rimraf: invalid options argument provided"),b.strictEqual(typeof t,"object","rimraf: options should be object"),jn(t),Mn(e,t,function n(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&r<t.maxBusyTries){r++;let s=r*100;return setTimeout(()=>Mn(e,t,n),s)}o.code==="ENOENT"&&(o=null)}i(o)})}function Mn(e,t,i){b(e),b(t),b(typeof i=="function"),t.lstat(e,(r,n)=>{if(r&&r.code==="ENOENT")return i(null);if(r&&r.code==="EPERM"&&He)return Bn(e,t,r,i);if(n&&n.isDirectory())return ut(e,t,r,i);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return i(null);if(o.code==="EPERM")return He?Bn(e,t,o,i):ut(e,t,o,i);if(o.code==="EISDIR")return ut(e,t,o,i)}return i(o)})})}function Bn(e,t,i,r){b(e),b(t),b(typeof r=="function"),t.chmod(e,438,n=>{n?r(n.code==="ENOENT"?null:i):t.stat(e,(o,s)=>{o?r(o.code==="ENOENT"?null:i):s.isDirectory()?ut(e,t,i,r):t.unlink(e,r)})})}function qn(e,t,i){let r;b(e),b(t);try{t.chmodSync(e,438)}catch(n){if(n.code==="ENOENT")return;throw i}try{r=t.statSync(e)}catch(n){if(n.code==="ENOENT")return;throw i}r.isDirectory()?ft(e,t,i):t.unlinkSync(e)}function ut(e,t,i,r){b(e),b(t),b(typeof r=="function"),t.rmdir(e,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?_u(e,t,r):n&&n.code==="ENOTDIR"?r(i):r(n)})}function _u(e,t,i){b(e),b(t),b(typeof i=="function"),t.readdir(e,(r,n)=>{if(r)return i(r);let o=n.length,s;if(o===0)return t.rmdir(e,i);n.forEach(a=>{nr(Hn.join(e,a),t,c=>{if(!s){if(c)return i(s=c);--o===0&&t.rmdir(e,i)}})})})}function Gn(e,t){let i;t=t||{},jn(t),b(e,"rimraf: missing path"),b.strictEqual(typeof e,"string","rimraf: path should be a string"),b(t,"rimraf: missing options"),b.strictEqual(typeof t,"object","rimraf: options should be object");try{i=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&He&&qn(e,t,r)}try{i&&i.isDirectory()?ft(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return He?qn(e,t,r):ft(e,t,r);if(r.code!=="EISDIR")throw r;ft(e,t,r)}}function ft(e,t,i){b(e),b(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw i;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")gu(e,t);else if(r.code!=="ENOENT")throw r}}function gu(e,t){if(b(e),b(t),t.readdirSync(e).forEach(i=>Gn(Hn.join(e,i),t)),He){let i=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-i<500)}else return t.rmdirSync(e,t)}$n.exports=nr;nr.sync=Gn});var je=y((gl,Wn)=>{"use strict";var lt=Y(),Ou=z().fromCallback,Vn=Yn();function Su(e,t){if(lt.rm)return lt.rm(e,{recursive:!0,force:!0},t);Vn(e,t)}function Nu(e){if(lt.rmSync)return lt.rmSync(e,{recursive:!0,force:!0});Vn.sync(e)}Wn.exports={remove:Ou(Su),removeSync:Nu}});var to=y((Ol,eo)=>{"use strict";var wu=z().fromPromise,Kn=ge(),Jn=require("path"),Xn=Z(),Zn=je(),zn=wu(async function(t){let i;try{i=await Kn.readdir(t)}catch{return Xn.mkdirs(t)}return Promise.all(i.map(r=>Zn.remove(Jn.join(t,r))))});function Qn(e){let t;try{t=Kn.readdirSync(e)}catch{return Xn.mkdirsSync(e)}t.forEach(i=>{i=Jn.join(e,i),Zn.removeSync(i)})}eo.exports={emptyDirSync:Qn,emptydirSync:Qn,emptyDir:zn,emptydir:zn}});var oo=y((Sl,no)=>{"use strict";var Iu=z().fromCallback,ro=require("path"),me=Y(),io=Z();function Ru(e,t){function i(){me.writeFile(e,"",r=>{if(r)return t(r);t()})}me.stat(e,(r,n)=>{if(!r&&n.isFile())return t();let o=ro.dirname(e);me.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?io.mkdirs(o,c=>{if(c)return t(c);i()}):t(s);a.isDirectory()?i():me.readdir(o,c=>{if(c)return t(c)})})})}function Au(e){let t;try{t=me.statSync(e)}catch{}if(t&&t.isFile())return;let i=ro.dirname(e);try{me.statSync(i).isDirectory()||me.readdirSync(i)}catch(r){if(r&&r.code==="ENOENT")io.mkdirsSync(i);else throw r}me.writeFileSync(e,"")}no.exports={createFile:Iu(Ru),createFileSync:Au}});var fo=y((Nl,uo)=>{"use strict";var vu=z().fromCallback,so=require("path"),pe=Y(),ao=Z(),ku=he().pathExists,{areIdentical:co}=Oe();function bu(e,t,i){function r(n,o){pe.link(n,o,s=>{if(s)return i(s);i(null)})}pe.lstat(t,(n,o)=>{pe.lstat(e,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),i(s);if(o&&co(a,o))return i(null);let c=so.dirname(t);ku(c,(h,f)=>{if(h)return i(h);if(f)return r(e,t);ao.mkdirs(c,l=>{if(l)return i(l);r(e,t)})})})})}function Du(e,t){let i;try{i=pe.lstatSync(t)}catch{}try{let o=pe.lstatSync(e);if(i&&co(o,i))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let r=so.dirname(t);return pe.existsSync(r)||ao.mkdirsSync(r),pe.linkSync(e,t)}uo.exports={createLink:vu(bu),createLinkSync:Du}});var ho=y((wl,lo)=>{"use strict";var de=require("path"),Ge=Y(),Pu=he().pathExists;function Fu(e,t,i){if(de.isAbsolute(e))return Ge.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),i(r)):i(null,{toCwd:e,toDst:e}));{let r=de.dirname(t),n=de.join(r,e);return Pu(n,(o,s)=>o?i(o):s?i(null,{toCwd:n,toDst:e}):Ge.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),i(a)):i(null,{toCwd:e,toDst:de.relative(r,e)})))}}function Cu(e,t){let i;if(de.isAbsolute(e)){if(i=Ge.existsSync(e),!i)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let r=de.dirname(t),n=de.join(r,e);if(i=Ge.existsSync(n),i)return{toCwd:n,toDst:e};if(i=Ge.existsSync(e),!i)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:de.relative(r,e)}}}lo.exports={symlinkPaths:Fu,symlinkPathsSync:Cu}});var Eo=y((Il,po)=>{"use strict";var mo=Y();function Lu(e,t,i){if(i=typeof t=="function"?t:i,t=typeof t=="function"?!1:t,t)return i(null,t);mo.lstat(e,(r,n)=>{if(r)return i(null,"file");t=n&&n.isDirectory()?"dir":"file",i(null,t)})}function Uu(e,t){let i;if(t)return t;try{i=mo.lstatSync(e)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}po.exports={symlinkType:Lu,symlinkTypeSync:Uu}});var No=y((Rl,So)=>{"use strict";var Mu=z().fromCallback,yo=require("path"),ee=ge(),To=Z(),Bu=To.mkdirs,qu=To.mkdirsSync,_o=ho(),Hu=_o.symlinkPaths,ju=_o.symlinkPathsSync,go=Eo(),Gu=go.symlinkType,$u=go.symlinkTypeSync,Yu=he().pathExists,{areIdentical:Oo}=Oe();function Vu(e,t,i,r){r=typeof i=="function"?i:r,i=typeof i=="function"?!1:i,ee.lstat(t,(n,o)=>{!n&&o.isSymbolicLink()?Promise.all([ee.stat(e),ee.stat(t)]).then(([s,a])=>{if(Oo(s,a))return r(null);xo(e,t,i,r)}):xo(e,t,i,r)})}function xo(e,t,i,r){Hu(e,t,(n,o)=>{if(n)return r(n);e=o.toDst,Gu(o.toCwd,i,(s,a)=>{if(s)return r(s);let c=yo.dirname(t);Yu(c,(h,f)=>{if(h)return r(h);if(f)return ee.symlink(e,t,a,r);Bu(c,l=>{if(l)return r(l);ee.symlink(e,t,a,r)})})})})}function Wu(e,t,i){let r;try{r=ee.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){let a=ee.statSync(e),c=ee.statSync(t);if(Oo(a,c))return}let n=ju(e,t);e=n.toDst,i=$u(n.toCwd,i);let o=yo.dirname(t);return ee.existsSync(o)||qu(o),ee.symlinkSync(e,t,i)}So.exports={createSymlink:Mu(Vu),createSymlinkSync:Wu}});var Do=y((Al,bo)=>{"use strict";var{createFile:wo,createFileSync:Io}=oo(),{createLink:Ro,createLinkSync:Ao}=fo(),{createSymlink:vo,createSymlinkSync:ko}=No();bo.exports={createFile:wo,createFileSync:Io,ensureFile:wo,ensureFileSync:Io,createLink:Ro,createLinkSync:Ao,ensureLink:Ro,ensureLinkSync:Ao,createSymlink:vo,createSymlinkSync:ko,ensureSymlink:vo,ensureSymlinkSync:ko}});var ht=y((vl,Po)=>{function zu(e,{EOL:t=`
`,finalEOL:i=!0,replacer:r=null,spaces:n}={}){let o=i?t:"";return JSON.stringify(e,r,n).replace(/\n/g,t)+o}function Qu(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Po.exports={stringify:zu,stripBom:Qu}});var Uo=y((kl,Lo)=>{var De;try{De=Y()}catch{De=require("fs")}var mt=z(),{stringify:Fo,stripBom:Co}=ht();async function Ku(e,t={}){typeof t=="string"&&(t={encoding:t});let i=t.fs||De,r="throws"in t?t.throws:!0,n=await mt.fromCallback(i.readFile)(e,t);n=Co(n);let o;try{o=JSON.parse(n,t?t.reviver:null)}catch(s){if(r)throw s.message=`${e}: ${s.message}`,s;return null}return o}var Ju=mt.fromPromise(Ku);function Xu(e,t={}){typeof t=="string"&&(t={encoding:t});let i=t.fs||De,r="throws"in t?t.throws:!0;try{let n=i.readFileSync(e,t);return n=Co(n),JSON.parse(n,t.reviver)}catch(n){if(r)throw n.message=`${e}: ${n.message}`,n;return null}}async function Zu(e,t,i={}){let r=i.fs||De,n=Fo(t,i);await mt.fromCallback(r.writeFile)(e,n,i)}var ef=mt.fromPromise(Zu);function tf(e,t,i={}){let r=i.fs||De,n=Fo(t,i);return r.writeFileSync(e,n,i)}var rf={readFile:Ju,readFileSync:Xu,writeFile:ef,writeFileSync:tf};Lo.exports=rf});var Bo=y((bl,Mo)=>{"use strict";var pt=Uo();Mo.exports={readJson:pt.readFile,readJsonSync:pt.readFileSync,writeJson:pt.writeFile,writeJsonSync:pt.writeFileSync}});var dt=y((Dl,jo)=>{"use strict";var nf=z().fromCallback,$e=Y(),qo=require("path"),Ho=Z(),of=he().pathExists;function sf(e,t,i,r){typeof i=="function"&&(r=i,i="utf8");let n=qo.dirname(e);of(n,(o,s)=>{if(o)return r(o);if(s)return $e.writeFile(e,t,i,r);Ho.mkdirs(n,a=>{if(a)return r(a);$e.writeFile(e,t,i,r)})})}function af(e,...t){let i=qo.dirname(e);if($e.existsSync(i))return $e.writeFileSync(e,...t);Ho.mkdirsSync(i),$e.writeFileSync(e,...t)}jo.exports={outputFile:nf(sf),outputFileSync:af}});var $o=y((Pl,Go)=>{"use strict";var{stringify:cf}=ht(),{outputFile:uf}=dt();async function ff(e,t,i={}){let r=cf(t,i);await uf(e,r,i)}Go.exports=ff});var Vo=y((Fl,Yo)=>{"use strict";var{stringify:lf}=ht(),{outputFileSync:hf}=dt();function mf(e,t,i){let r=lf(t,i);hf(e,r,i)}Yo.exports=mf});var zo=y((Cl,Wo)=>{"use strict";var pf=z().fromPromise,V=Bo();V.outputJson=pf($o());V.outputJsonSync=Vo();V.outputJSON=V.outputJson;V.outputJSONSync=V.outputJsonSync;V.writeJSON=V.writeJson;V.writeJSONSync=V.writeJsonSync;V.readJSON=V.readJson;V.readJSONSync=V.readJsonSync;Wo.exports=V});var Zo=y((Ll,Xo)=>{"use strict";var df=Y(),sr=require("path"),Ef=ct().copy,Jo=je().remove,xf=Z().mkdirp,yf=he().pathExists,Qo=Oe();function Tf(e,t,i,r){typeof i=="function"&&(r=i,i={}),i=i||{};let n=i.overwrite||i.clobber||!1;Qo.checkPaths(e,t,"move",i,(o,s)=>{if(o)return r(o);let{srcStat:a,isChangingCase:c=!1}=s;Qo.checkParentPaths(e,a,t,"move",h=>{if(h)return r(h);if(_f(t))return Ko(e,t,n,c,r);xf(sr.dirname(t),f=>f?r(f):Ko(e,t,n,c,r))})})}function _f(e){let t=sr.dirname(e);return sr.parse(t).root===t}function Ko(e,t,i,r,n){if(r)return or(e,t,i,n);if(i)return Jo(t,o=>o?n(o):or(e,t,i,n));yf(t,(o,s)=>o?n(o):s?n(new Error("dest already exists.")):or(e,t,i,n))}function or(e,t,i,r){df.rename(e,t,n=>n?n.code!=="EXDEV"?r(n):gf(e,t,i,r):r())}function gf(e,t,i,r){Ef(e,t,{overwrite:i,errorOnExist:!0},o=>o?r(o):Jo(e,r))}Xo.exports=Tf});var ns=y((Ul,is)=>{"use strict";var ts=Y(),cr=require("path"),Of=ct().copySync,rs=je().removeSync,Sf=Z().mkdirpSync,es=Oe();function Nf(e,t,i){i=i||{};let r=i.overwrite||i.clobber||!1,{srcStat:n,isChangingCase:o=!1}=es.checkPathsSync(e,t,"move",i);return es.checkParentPathsSync(e,n,t,"move"),wf(t)||Sf(cr.dirname(t)),If(e,t,r,o)}function wf(e){let t=cr.dirname(e);return cr.parse(t).root===t}function If(e,t,i,r){if(r)return ar(e,t,i);if(i)return rs(t),ar(e,t,i);if(ts.existsSync(t))throw new Error("dest already exists.");return ar(e,t,i)}function ar(e,t,i){try{ts.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return Rf(e,t,i)}}function Rf(e,t,i){return Of(e,t,{overwrite:i,errorOnExist:!0}),rs(e)}is.exports=Nf});var ss=y((Ml,os)=>{"use strict";var Af=z().fromCallback;os.exports={move:Af(Zo()),moveSync:ns()}});var ur=y((Bl,as)=>{"use strict";as.exports={...ge(),...ct(),...to(),...Do(),...zo(),...Z(),...ss(),...dt(),...he(),...je()}});var ds=y((zl,ps)=>{"use strict";var ms=Object.getOwnPropertySymbols,vf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable;function bf(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Df(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ps.exports=Df()?Object.assign:function(e,t){for(var i,r=bf(e),n,o=1;o<arguments.length;o++){i=Object(arguments[o]);for(var s in i)vf.call(i,s)&&(r[s]=i[s]);if(ms){n=ms(i);for(var a=0;a<n.length;a++)kf.call(i,n[a])&&(r[n[a]]=i[n[a]])}}return r}});var ys=y((Ql,lr)=>{"use strict";lr.exports=Ff;lr.exports.append=xs;var Pf=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function xs(e,t){if(typeof e!="string")throw new TypeError("header argument is required");if(!t)throw new TypeError("field argument is required");for(var i=Array.isArray(t)?t:Es(String(t)),r=0;r<i.length;r++)if(!Pf.test(i[r]))throw new TypeError("field argument contains an invalid header name");if(e==="*")return e;var n=e,o=Es(e.toLowerCase());if(i.indexOf("*")!==-1||o.indexOf("*")!==-1)return"*";for(var s=0;s<i.length;s++){var a=i[s].toLowerCase();o.indexOf(a)===-1&&(o.push(a),n=n?n+", "+i[s]:i[s])}return n}function Es(e){for(var t=0,i=[],r=0,n=0,o=e.length;n<o;n++)switch(e.charCodeAt(n)){case 32:r===t&&(r=t=n+1);break;case 44:i.push(e.substring(r,t)),r=t=n+1;break;default:t=n+1;break}return i.push(e.substring(r,t)),i}function Ff(e,t){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var i=e.getHeader("Vary")||"",r=Array.isArray(i)?i.join(", "):String(i);(i=xs(r,t))&&e.setHeader("Vary",i)}});var _s=y((Kl,Ts)=>{(function(){"use strict";var e=ds(),t=ys(),i={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function r(m){return typeof m=="string"||m instanceof String}function n(m,d){if(Array.isArray(d)){for(var x=0;x<d.length;++x)if(n(m,d[x]))return!0;return!1}else return r(d)?m===d:d instanceof RegExp?d.test(m):!!d}function o(m,d){var x=d.headers.origin,T=[],O;return!m.origin||m.origin==="*"?T.push([{key:"Access-Control-Allow-Origin",value:"*"}]):r(m.origin)?(T.push([{key:"Access-Control-Allow-Origin",value:m.origin}]),T.push([{key:"Vary",value:"Origin"}])):(O=n(x,m.origin),T.push([{key:"Access-Control-Allow-Origin",value:O?x:!1}]),T.push([{key:"Vary",value:"Origin"}])),T}function s(m){var d=m.methods;return d.join&&(d=m.methods.join(",")),{key:"Access-Control-Allow-Methods",value:d}}function a(m){return m.credentials===!0?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function c(m,d){var x=m.allowedHeaders||m.headers,T=[];return x?x.join&&(x=x.join(",")):(x=d.headers["access-control-request-headers"],T.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),x&&x.length&&T.push([{key:"Access-Control-Allow-Headers",value:x}]),T}function h(m){var d=m.exposedHeaders;if(d)d.join&&(d=d.join(","));else return null;return d&&d.length?{key:"Access-Control-Expose-Headers",value:d}:null}function f(m){var d=(typeof m.maxAge=="number"||m.maxAge)&&m.maxAge.toString();return d&&d.length?{key:"Access-Control-Max-Age",value:d}:null}function l(m,d){for(var x=0,T=m.length;x<T;x++){var O=m[x];O&&(Array.isArray(O)?l(O,d):O.key==="Vary"&&O.value?t(d,O.value):O.value&&d.setHeader(O.key,O.value))}}function E(m,d,x,T){var O=[],N=d.method&&d.method.toUpperCase&&d.method.toUpperCase();N==="OPTIONS"?(O.push(o(m,d)),O.push(a(m,d)),O.push(s(m,d)),O.push(c(m,d)),O.push(f(m,d)),O.push(h(m,d)),l(O,x),m.preflightContinue?T():(x.statusCode=m.optionsSuccessStatus,x.setHeader("Content-Length","0"),x.end())):(O.push(o(m,d)),O.push(a(m,d)),O.push(h(m,d)),l(O,x),T())}function p(m){var d=null;return typeof m=="function"?d=m:d=function(x,T){T(null,m)},function(T,O,N){d(T,function(B,X){if(B)N(B);else{var L=e({},i,X),F=null;L.origin&&typeof L.origin=="function"?F=L.origin:L.origin&&(F=function(J,g){g(null,L.origin)}),F?F(T.headers.origin,function(J,g){J||!g?N(J):(L.origin=g,E(L,T,O,N))}):N()}})}}Ts.exports=p})()});var Ss=$(pr());var wt=$(Er()),Pr=$(gt());var Ot=require("crypto");var Sr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var qs=128,Ee,Ne,Hs=e=>{!Ee||Ee.length<e?(Ee=Buffer.allocUnsafe(e*qs),(0,Ot.randomFillSync)(Ee),Ne=0):Ne+e>Ee.length&&((0,Ot.randomFillSync)(Ee),Ne=0),Ne+=e};var Nr=(e=21)=>{Hs(e-=0);let t="";for(let i=Ne-e;i<Ne;i++)t+=Sr[Ee[i]&63];return t};var Nt=$(require("http"),1),Dr=$(vr(),1);var kr=$(require("querystring"),1);function br(e){let t=e.url;if(t==null)return;let i=e._parsedUrl;if(i&&i.raw===t)return i;let r=t,n="",o;if(t.length>1){let s=t.indexOf("?",1);s!==-1&&(n=t.substring(s),r=t.substring(0,s),n.length>1&&(o=kr.parse(n.substring(1))))}return e._parsedUrl={pathname:r,search:n,query:o,raw:t}}function js(e,t,i){let r=typeof e.status=="number"&&e.status;r=i.statusCode=r&&r>=100?r:500,typeof e=="string"||Buffer.isBuffer(e)?i.end(e):i.end(e.message||Nt.default.STATUS_CODES[r])}var St=e=>e instanceof we?e.attach:e,we=class extends Dr.default{constructor(t={}){super(),this.parse=br,this.server=t.server,this.handler=this.handler.bind(this),this.onError=t.onError||js,this.onNoMatch=t.onNoMatch||this.onError.bind(null,{status:404}),this.attach=(i,r)=>setImmediate(this.handler,i,r)}use(t,...i){return t==="/"?super.use(t,i.map(St)):typeof t=="function"||t instanceof we?super.use("/",[t,...i].map(St)):super.use(t,(r,n,o)=>{if(typeof t=="string"){let s=t.length;t.startsWith("/")||s++,r.url=r.url.substring(s)||"/",r.path=r.path.substring(s)||"/"}else r.url=r.url.replace(t,"")||"/",r.path=r.path.replace(t,"")||"/";r.url.charAt(0)!=="/"&&(r.url="/"+r.url),o()},i.map(St),(r,n,o)=>{r.path=r._parsedUrl.pathname,r.url=r.path+r._parsedUrl.search,o()}),this}listen(){return(this.server=this.server||Nt.default.createServer()).on("request",this.attach),this.server.listen.apply(this.server,arguments),this}handler(t,i,r){let n=this.parse(t),o=n.pathname,s=this.find(t.method,t.path=o);if(t.url=o+n.search,t.originalUrl=t.originalUrl||t.url,t.query=n.query||{},t.search=n.search,t.params=s.params,o.length>1&&o.indexOf("%",1)!==-1)for(let l in t.params)try{t.params[l]=decodeURIComponent(t.params[l])}catch{}let a=0,c=s.handlers.concat(this.onNoMatch),h=c.length,f=async()=>i.finished||a<h&&c[a++](t,i,r);(r=r||(l=>l?this.onError(l,t,i,r):f().catch(r)))()}};function ze(e){return new we(e)}var It=(e,t,i,r)=>{i.statusCode=Pr.StatusCodes.INTERNAL_SERVER_ERROR,i.setHeader("content-type","application/json").end((0,wt.default)({success:!1,msg:"Something went wrong on the server.",data:{}}))},Fr=(e,t,i)=>{t.json=r=>{t.setHeader("content-type","application/json"),t.end((0,wt.default)(r))},i()},Cr=e=>Nr(e),Qe=()=>ze({onError:It});var ls=$(Pi());var Te=$(require("fs"),1),x0=Te.default.existsSync,y0=Te.default.createReadStream;async function Bt(e){return new Promise((t,i)=>{Te.default.stat(e,(r,n)=>{r?i(r):t(n)})})}async function Fi(e){return new Promise((t,i)=>{Te.default.close(e,r=>{r?i(r):t()})})}async function Ci(e,t){return new Promise((i,r)=>{Te.default.open(e,t,(n,o)=>{n?r(n):i(o)})})}async function qt(e,t,i,r,n){return new Promise((o,s)=>{Te.default.read(e,t,i,r,n,(a,c,h)=>{a?s(a):o({bytesRead:c,buffer:h})})})}var lc="End-Of-Stream",M=class extends Error{constructor(){super(lc)}};var N0=1*1024*1024;var Ht=require("buffer"),Ae=class{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t||{}}async readToken(t,i=this.position){let r=Ht.Buffer.alloc(t.len);if(await this.readBuffer(r,{position:i})<t.len)throw new M;return t.get(r,0)}async peekToken(t,i=this.position){let r=Ht.Buffer.alloc(t.len);if(await this.peekBuffer(r,{position:i})<t.len)throw new M;return t.get(r,0)}async readNumber(t){if(await this.readBuffer(this.numBuffer,{length:t.len})<t.len)throw new M;return t.get(this.numBuffer,0)}async peekNumber(t){if(await this.peekBuffer(this.numBuffer,{length:t.len})<t.len)throw new M;return t.get(this.numBuffer,0)}async ignore(t){if(this.fileInfo.size!==void 0){let i=this.fileInfo.size-this.position;if(t>i)return this.position+=i,i}return this.position+=t,t}async close(){}normalizeOptions(t,i){if(i&&i.position!==void 0&&i.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return i?{mayBeLess:i.mayBeLess===!0,offset:i.offset?i.offset:0,length:i.length?i.length:t.length-(i.offset?i.offset:0),position:i.position?i.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}};var jt=class extends Ae{constructor(t,i){super(i),this.fd=t}async readBuffer(t,i){let r=this.normalizeOptions(t,i);this.position=r.position;let n=await qt(this.fd,t,r.offset,r.length,r.position);if(this.position+=n.bytesRead,n.bytesRead<r.length&&(!i||!i.mayBeLess))throw new M;return n.bytesRead}async peekBuffer(t,i){let r=this.normalizeOptions(t,i),n=await qt(this.fd,t,r.offset,r.length,r.position);if(!r.mayBeLess&&n.bytesRead<r.length)throw new M;return n.bytesRead}async close(){return Fi(this.fd)}};async function Gt(e){let t=await Bt(e);if(!t.isFile)throw new Error(`File not a file: ${e}`);let i=await Ci(e,"r");return new jt(i,{path:e,size:t.size})}var ue=require("buffer");var Bi=$(Mi(),1),qi=require("buffer");function W(e){return new DataView(e.buffer,e.byteOffset)}var Hi={len:1,get(e,t){return W(e).getUint8(t)},put(e,t,i){return W(e).setUint8(t,i),t+1}},Ze={len:2,get(e,t){return W(e).getUint16(t,!0)},put(e,t,i){return W(e).setUint16(t,i,!0),t+2}},et={len:2,get(e,t){return W(e).getUint16(t)},put(e,t,i){return W(e).setUint16(t,i),t+2}};var ji={len:4,get(e,t){return W(e).getUint32(t,!0)},put(e,t,i){return W(e).setUint32(t,i,!0),t+4}},Gi={len:4,get(e,t){return W(e).getUint32(t)},put(e,t,i){return W(e).setUint32(t,i),t+4}};var $i={len:4,get(e,t){return W(e).getInt32(t)},put(e,t,i){return W(e).setInt32(t,i),t+4}};var Yi={len:8,get(e,t){return W(e).getBigUint64(t,!0)},put(e,t,i){return W(e).setBigUint64(t,i,!0),t+8}};var oe=class{constructor(t,i){this.len=t,this.encoding=i}get(t,i){return qi.Buffer.from(t).toString(this.encoding,i,i+this.len)}},ne=class{constructor(t){this.len=t}static decode(t,i,r){let n="";for(let o=i;o<r;++o)n+=ne.codePointToString(ne.singleByteDecoder(t[o]));return n}static inRange(t,i,r){return i<=t&&t<=r}static codePointToString(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}static singleByteDecoder(t){if(ne.inRange(t,0,127))return t;let i=ne.windows1252[t-128];if(i===null)throw Error("invaliding encoding");return i}get(t,i=0){return ne.decode(t,i,i+this.len)}};ne.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];function Vi(e){return[...e].map(t=>t.charCodeAt(0))}function Wi(e,t=0){let i=Number.parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(i))return!1;let r=8*32;for(let n=t;n<t+148;n++)r+=e[n];for(let n=t+156;n<t+512;n++)r+=e[n];return i===r}var zi={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4};var Qi=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],Ki=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"];var xc=4100;function te(e,t,i){i={offset:0,...i};for(let[r,n]of t.entries())if(i.mask){if(n!==(i.mask[r]&e[r+i.offset]))return!1}else if(n!==e[r+i.offset])return!1;return!0}async function Vt(e){try{return new Yt().parse(e)}catch(t){if(!(t instanceof M))throw t}}var Yt=class{check(t,i){return te(this.buffer,t,i)}checkString(t,i){return this.check(Vi(t),i)}async parse(t){if(this.buffer=ue.Buffer.alloc(xc),t.fileInfo.size===void 0&&(t.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=t,await t.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await t.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(t);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await t.ignore(6);let i=await t.readToken(zi);return t.position+i>t.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await t.ignore(i),Vt(t))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;t.position+30<t.fileInfo.size;){await t.readBuffer(this.buffer,{length:30});let i={compressedSize:this.buffer.readUInt32LE(18),uncompressedSize:this.buffer.readUInt32LE(22),filenameLength:this.buffer.readUInt16LE(26),extraFieldLength:this.buffer.readUInt16LE(28)};if(i.filename=await t.readToken(new oe(i.filenameLength,"utf-8")),await t.ignore(i.extraFieldLength),i.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(i.filename.endsWith(".rels")||i.filename.endsWith(".xml"))switch(i.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(i.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(i.filename.startsWith("3D/")&&i.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(i.filename==="mimetype"&&i.compressedSize===i.uncompressedSize)switch((await t.readToken(new oe(i.compressedSize,"utf-8"))).trim()){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(i.compressedSize===0){let r=-1;for(;r<0&&t.position<t.fileInfo.size;)await t.peekBuffer(this.buffer,{mayBeLess:!0}),r=this.buffer.indexOf("504B0304",0,"hex"),await t.ignore(r>=0?r:this.buffer.length)}else await t.ignore(i.compressedSize)}}catch(i){if(!(i instanceof M))throw i}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await t.ignore(28);let i=ue.Buffer.alloc(8);return await t.readBuffer(i),te(i,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:te(i,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:te(i,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:te(i,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:te(i,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:te(i,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let i=this.buffer.toString("binary",8,12).replace("\0"," ").trim();switch(i){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return i.startsWith("3g")?i.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){await t.ignore(1350);let i=10*1024*1024,r=ue.Buffer.alloc(Math.min(i,t.fileInfo.size));return await t.readBuffer(r,{mayBeLess:!0}),r.includes(ue.Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let i=await this.readTiffHeader(!1);if(i)return i}if(this.check([77,77])){let i=await this.readTiffHeader(!0);if(i)return i}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function i(){let a=await t.peekNumber(Hi),c=128,h=0;for(;(a&c)===0&&c!==0;)++h,c>>=1;let f=ue.Buffer.alloc(h+1);return await t.readBuffer(f),f}async function r(){let a=await i(),c=await i();c[0]^=128>>c.length-1;let h=Math.min(6,c.length);return{id:a.readUIntBE(0,a.length),len:c.readUIntBE(c.length-h,h)}}async function n(a){for(;a>0;){let c=await r();if(c.id===17026)return(await t.readToken(new oe(c.len,"utf-8"))).replace(/\00.*$/g,"");await t.ignore(c.len),--a}}let o=await r();switch(await n(o.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await t.ignore(8),await t.readToken(new oe(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.check([137,80,78,71,13,10,26,10])){await t.ignore(8);async function i(){return{length:await t.readToken($i),type:await t.readToken(new oe(4,"binary"))}}do{let r=await i();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await t.ignore(r.length+4)}}while(t.position+8<t.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function i(){let r=ue.Buffer.alloc(16);return await t.readBuffer(r),{id:r,size:Number(await t.readToken(Yi))}}for(await t.ignore(30);t.position+24<t.fileInfo.size;){let r=await i(),n=r.size-24;if(te(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let o=ue.Buffer.alloc(16);if(n-=await t.readBuffer(o),te(o,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(te(o,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await t.ignore(n)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await t.ignore(20),await t.readToken(new oe(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await t.peekBuffer(this.buffer,{length:Math.min(256,t.fileInfo.size),mayBeLess:!0}),this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let i=this.buffer.readUInt32LE(12);if(i>12&&this.buffer.length>=i+16)try{let r=this.buffer.slice(16,i+16).toString();if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await t.peekBuffer(this.buffer,{length:Math.min(512,t.fileInfo.size),mayBeLess:!0}),Wi(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(t){let i=await this.tokenizer.readToken(t?et:Ze);switch(this.tokenizer.ignore(10),i){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(t){let i=await this.tokenizer.readToken(t?et:Ze);for(let r=0;r<i;++r){let n=await this.readTiffTag(t);if(n)return n}}async readTiffHeader(t){let i=(t?et:Ze).get(this.buffer,2),r=(t?Gi:ji).get(this.buffer,4);if(i===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}await this.tokenizer.ignore(r);let n=await this.readTiffIFD(!1);return n||{ext:"tif",mime:"image/tiff"}}if(i===43)return{ext:"tif",mime:"image/tiff"}}};var Z0=new Set(Qi),el=new Set(Ki);async function Ji(e){let t=await Gt(e);try{return await Vt(t)}finally{await t.close()}}var hs=$(ur()),Ye=$(gt()),fr=$(require("path"));var cs=$(require("path")),us=1024*1024*2,fs=cs.default.resolve(__dirname+"/uploads/");var Et=Qe();Et.get("/:id",async(e,t)=>{try{let i=await Ji(fr.default.resolve(__dirname,`uploads/${e.params.id}`)),r=await hs.default.readFile(fr.default.resolve(__dirname,`uploads/${e.params.id}`));t.setHeader("content-type",i.mime),t.end(r)}catch{return t.statusCode=Ye.StatusCodes.NOT_FOUND,t.json({success:!1,msg:"The request file could not be found on the server.",data:{}})}});Et.use((0,ls.default)()).post("/",async(e,t)=>{let i=Cr(6);if(e.files.img){if(e.files.img.size>us)return t.statusCode=Ye.StatusCodes.NOT_ACCEPTABLE,t.json({success:!1,msg:"The upload file size limit has been reached.",data:{}});e.files.img.mv(fs+"/"+i,r=>r?(t.statusCode=Ye.StatusCodes.INTERNAL_SERVER_ERROR,t.json({success:!1,msg:"File uploading error on the server",data:{}})):t.json({success:!0,msg:"The file was uploaded successfully to the server.",data:i}))}else return t.statusCode=Ye.StatusCodes.NOT_ACCEPTABLE,t.json({success:!1,msg:"Please send the file",data:{}})});var xt=Qe();xt.get("/",(e,t)=>{t.json({success:!0,msg:"The API is working successfully.",data:{}})});xt.use("/upload",Et);var Ns=$(_s());var gs=$(ur()),Cf=async()=>{await gs.default.ensureDir("uploads")};Cf();var Ve=ze({onError:It}),Os=parseInt(process.env.PORT||8080);Ve.use((0,Ss.json)());Ve.use((0,Ns.default)());Ve.use(Fr);Ve.use("/api",xt);Ve.listen(Os,()=>console.log(`Running on ${Os}`));
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 * vary
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
